<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mangrove Guardian - EVI Panjang21</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <!-- Leaflet JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <!-- Leaflet Draw -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/leaflet.draw/1.0.4/leaflet.draw-src.css" />
  <script src="https://cdnjs.cloudflare.com/leaflet.draw/1.0.4/leaflet.draw-src.js"></script>
  <!-- Chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>

  <style>
    /* VARIABLES */
    :root{
      --mg-green:#0a5c36;
      --mg-green-light:#1a7d4e;
      --mg-green-dark:#064527;
      --panel:rgba(255,255,255,0.95);
      --muted:#51606a;
      --navbar-height: 60px; 
    }
    
    *{box-sizing:border-box; margin:0; padding:0;}
    
    html,body{height:100%; margin:0; font-family:'Segoe UI', system-ui, sans-serif; color:#15302a;}
    body{background:#f8f9fa;}
    #map{flex:1; z-index:1;}

    .topbar{
      height: var(--navbar-height);
      padding:0 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:var(--mg-green);
      color:#fff;
      position:sticky;
      top:0;
      z-index:1500;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-bottom: 1px solid var(--mg-green-dark);
    }
    
    .brand{
      font-weight:600;
      font-size:20px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    
    .nav-right-container{display:flex; align-items:center; gap:25px;}
    .nav-menu{display:flex; gap:25px}
    .nav-menu a{
      color:#fff;
      text-decoration:none;
      font-size:14px;
      font-weight:500;
      padding:8px 0;
      transition:opacity 0.2s;
    }
    .nav-menu a:hover{opacity:0.8;}
    .lang-switch{
      font-size:13px;
      cursor:pointer;
      background:rgba(255,255,255,0.15);
      padding:6px 12px;
      border-radius:4px;
      font-weight:500;
    }

    .chat-box-container{
      position:fixed;
      bottom:20px;
      right:20px;
      z-index:1600;
      width:350px;
      background:var(--panel);
      border-radius:8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      border:1px solid #e1e5e9;
      display:flex;
      flex-direction:column;
      max-height:500px;
    }
    
    .chat-header{
      background: var(--mg-green);
      color: #fff;
      padding: 12px 16px;
      font-weight: 600;
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      align-items:center;
      border-radius:8px 8px 0 0;
    }
    
    .chat-content{
      padding: 16px;
      flex:1;
      overflow-y: auto;
      display:flex;
      flex-direction:column;
      gap:12px;
      max-height:300px;
    }
    
    .chat-input-row{
      display:flex;
      gap:8px;
      padding:12px 16px;
      border-top:1px solid #e1e5e9;
      background:#f8f9fa;
    }
    
    .chat-input-row input{
      flex:1;
      padding:10px 12px;
      border-radius:6px;
      border:1px solid #ddd;
      outline:none;
      font-size:14px;
      background:#fff;
    }
    
    .chat-input-row button{
      background:var(--mg-green);
      border:0;
      color:#fff;
      padding:10px 16px;
      border-radius:6px;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
    }

    .chat-message{
      padding:10px 14px;
      border-radius:8px;
      max-width:85%;
      font-size:14px;
      line-height:1.4;
    }
    
    .chat-user{
      background:#e3f2fd;
      align-self:flex-end;
      border-bottom-right-radius:2px;
    }
    
    .chat-bot{
      background:#f5f5f5;
      align-self:flex-start;
      border-bottom-left-radius:2px;
    }

    .app{
      height:calc(100vh - var(--navbar-height));
      position:relative;
      display:flex;
    }

    .search-row-container{
      position:absolute;
      top:20px;
      left:50%;
      transform:translateX(-50%);
      z-index:1300;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      width:90%;
      max-width:700px;
    }
    
    .search-row{
      display:flex;
      align-items:center;
      gap:8px;
      width:100%;
    }
    
    .search-box{
      display:flex;
      align-items:center;
      background:var(--panel);
      padding:8px 16px;
      border-radius:8px;
      box-shadow:0 2px 8px rgba(0,0,0,0.1);
      width:100%;
      border:1px solid #e1e5e9;
      flex:1;
    }
    
    .search-box input{
      border:0;
      outline:none;
      padding:8px;
      font-size:14px;
      background:transparent;
      flex:1;
    }
    
    .search-box button{
      background:var(--mg-green);
      border:0;
      color:#fff;
      padding:8px 16px;
      border-radius:6px;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
    }
    
    .action-btn{
      background:var(--mg-green);
      color:#fff;
      border-radius:8px;
      padding:10px 16px;
      border:none;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      white-space:nowrap;
    }
    
    .mapFlipBtn{
      background:var(--mg-green);
      border:none;
      padding:10px;
      border-radius:6px;
      color:white;
      cursor:pointer;
      font-size:16px;
    }

    .stats-toggle-btn {
      background:var(--mg-green);
      border:none;
      padding:10px 14px;
      border-radius:6px;
      color:white;
      cursor:pointer;
      font-size:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
      transition:all 0.3s ease;
      white-space: nowrap;
    }

    .stats-toggle-btn:hover {
      background:var(--mg-green-light);
      transform: translateY(-1px);
    }

    .vtoolbar{
      position:absolute;
      left:20px;
      top:120px;
      z-index:1300;
      display:flex;
      flex-direction:column;
      gap:8px;
      padding:8px;
      border-radius:8px;
      background:transparent;
    }
    
    .vt-btn{
      width:44px;
      height:44px;
      border-radius:6px;
      background:var(--panel);
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid #e1e5e9;
      box-shadow:0 2px 6px rgba(0,0,0,0.08);
      cursor:pointer;
      font-size:16px;
      transition:all 0.2s;
    }
    
    .vt-btn:hover{
      background:#f8f9fa;
    }

    .right-panel{
      position:absolute;
      right:20px;
      top:20px;
      width:320px;
      z-index:1300;
      background:var(--panel);
      border-radius:8px;
      box-shadow:0 4px 20px rgba(0,0,0,0.15);
      border:1px solid #e1e5e9;
      max-height:calc(100vh - 100px);
      overflow-y:auto;
    }
    
    .panel-inner{
      padding:16px;
    }
    
    .panel-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:16px;
      padding-bottom:12px;
      border-bottom:1px solid #e1e5e9;
    }
    
    .panel-header h3{
      margin:0;
      color:var(--mg-green);
      font-size:16px;
      font-weight:600;
    }

    .switch-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 0;
      border-bottom:1px solid #f0f0f0;
    }
    
    .switch-label{
      font-size:14px;
      color:#333;
    }
    
    .switch{
      position:relative;
      width:44px;
      height:24px;
      border-radius:12px;
      background:#ddd;
      cursor:pointer;
    }
    
    .switch .knob{
      position:absolute;
      top:2px;
      left:2px;
      width:20px;
      height:20px;
      border-radius:50%;
      background:white;
      box-shadow:0 1px 3px rgba(0,0,0,0.2);
      transition:left 0.2s;
    }
    
    .switch.on{
      background:var(--mg-green);
    }
    
    .switch.on .knob{
      left:22px;
    }

    .basemap-toggle{
      position:absolute;
      right:20px;
      top:70px;
      z-index:1350;
    }
    
    .basemap-card{
      width:250px;
      background:var(--panel);
      border-radius:8px;
      padding:12px;
      box-shadow:0 4px 20px rgba(0,0,0,0.15);
      border:1px solid #e1e5e9;
    }
    
    .basemap-card.hidden{
      display:none;
    }
    
    .basemap-item{
      padding:10px;
      border-radius:6px;
      margin-bottom:6px;
      cursor:pointer;
      font-size:14px;
      border:1px solid transparent;
    }
    
    .basemap-item:hover{
      background:#f8f9fa;
    }
    
    .basemap-item.active{
      background:#e8f5e8;
      border-color:var(--mg-green);
    }

    .scale-box{
      position:absolute;
      left:20px;
      bottom:20px;
      background:var(--panel);
      padding:8px 12px;
      border-radius:6px;
      font-size:12px;
      border:1px solid #e1e5e9;
      z-index:1300;
      box-shadow:0 2px 4px rgba(0,0,0,0.1);
    }

    .class-item{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 0;
      border-bottom:1px solid #f0f0f0;
    }
    
    .class-color{
      width:16px;
      height:16px;
      border-radius:3px;
    }
    
    .class-label{
      flex:1;
      font-size:13px;
    }

    .file-upload{
      margin-top:16px;
      padding:12px;
      border:2px dashed #ddd;
      border-radius:6px;
      text-align:center;
      cursor:pointer;
      transition:border-color 0.2s;
    }
    
    .file-upload:hover{
      border-color:var(--mg-green);
    }
    
    .file-hint{
      font-size:12px;
      color:var(--muted);
      margin-top:8px;
      text-align:center;
    }

    .vt-btn.active-draw{
      background:var(--mg-green);
      color:#fff;
    }
    
    .vt-btn.delete-active{
      background:#dc3545;
      color:#fff;
    }

    @media (max-width:768px){
      .nav-menu{display:none}
      .search-row{flex-wrap:wrap;}
      .right-panel{width:95%; right:2.5%;}
      .chat-box-container{width:95%; right:2.5%;}
      .stats-panel{width:95%; left:2.5%;}
      .stats-toggle-btn{display:none;}
    }

    .analysis-section {
      margin: 16px 0;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 6px;
    }
    
    .pulau-selector {
      margin-bottom: 12px;
    }
    
    .pulau-selector select {
      width: 100%;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ddd;
    }
    
    .data-display {
      background: white;
      padding: 12px;
      border-radius: 4px;
      margin-top: 8px;
    }
    
    .data-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 13px;
    }
    
    .data-value {
      font-weight: 600;
      color: var(--mg-green);
    }

    .custom-tooltip {
      background: rgba(255, 255, 255, 0.95) !important;
      border: 1px solid #0a5c36 !important;
      border-radius: 4px !important;
      padding: 4px 8px !important;
      font-size: 12px !important;
      font-weight: 500 !important;
    }

    .legend {
      background: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    
    .legend h4 {
      margin: 0 0 8px 0;
    }

    .stats-panel {
      position: absolute;
      left: 80px;
      top: 120px;
      z-index: 1300;
      background: var(--panel);
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      border: 1px solid #e1e5e9;
      width: 300px;
      max-height: 75vh;
      overflow-y: auto;
      transition: all 0.3s ease;
    }

    .stats-header {
      font-weight: 600;
      color: var(--mg-green);
      margin-bottom: 12px;
      font-size: 16px;
      border-bottom: 2px solid var(--mg-green);
      padding-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stats-close {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: var(--muted);
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .stats-close:hover {
      color: var(--mg-green);
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 13px;
      padding: 6px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .stat-item:last-child {
      border-bottom: none;
    }

    .stat-value {
      font-weight: 600;
      color: var(--mg-green);
    }

    .chart-container {
      margin-top: 15px;
      height: 200px;
      position: relative;
    }

    .download-btn {
      background: var(--mg-green);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      margin-top: 15px;
      width: 100%;
      transition: background 0.3s ease;
    }

    .download-btn:hover {
      background: var(--mg-green-light);
    }

    .collapsible {
      margin-top: 10px;
    }

    .collapsible-header {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      font-size: 13px;
      color: var(--mg-green);
    }

    .collapsible-content {
      padding: 10px;
      background: white;
      border-radius: 0 0 6px 6px;
      margin-top: 2px;
    }

    .collapsible.hidden .collapsible-content {
      display: none;
    }

    /* Progress Bar untuk Loading */
    .progress-bar {
      width: 100%;
      height: 4px;
      background: #f0f0f0;
      border-radius: 2px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: var(--mg-green);
      transition: width 0.3s ease;
    }

    /* Filter Controls */
    .filter-controls {
      margin: 15px 0;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 6px;
    }

    .filter-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--mg-green);
    }

    .filter-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .filter-btn {
      padding: 6px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }

    .filter-btn.active {
      background: var(--mg-green);
      color: white;
      border-color: var(--mg-green);
    }

    .filter-btn:hover {
      background: #e9ecef;
    }

    .filter-btn.active:hover {
      background: var(--mg-green-light);
    }
  </style>
</head>
<body>

  <!-- Header -->
  <div class="topbar">
    <div class="brand">
      <span>üåø MangroveGuardian - EVI Panjang21</span>
    </div>
    <div class="nav-right-container">
      <div class="nav-menu" id="navMenu">
        <a href="index.html" data-key="home">Beranda</a>
        <a href="index.html" data-key="about">Tentang</a>
      </div>
      <div class="lang-switch" id="langSwitch">ID / EN</div>
    </div>
  </div>

  <!-- Chat Box -->
  <div class="chat-box-container" id="chatBoxContainer">
    <div class="chat-header" id="chatHeader">
      <span>üí¨ Asisten Mangrove</span>
      <span>‚àí</span>
    </div>
    <div class="chat-content" id="chatContent">
      <div class="chat-message chat-bot">Halo! Saya asisten virtual Mangrove Guardian. Data EVI Panjang21 memiliki 6 poligon dengan total luasan 88.68 ha.</div>
    </div>
    <div class="chat-input-row">
      <input type="text" id="chatInput" placeholder="Ketik pertanyaan Anda..." />
      <button id="sendChat">Kirim</button>
    </div>
  </div>

  <!-- Main App -->
  <div class="app">
    <div id="map"></div>

    <!-- Search Bar dengan Tombol Statistik di Kiri -->
    <div class="search-row-container">
      <div class="search-row">
        <!-- Tombol Statistik di sebelah kiri search box -->
        <button class="stats-toggle-btn" id="statsToggle" title="Toggle Panel Statistik">
          üìä Statistik
        </button>

        <!-- Search Box di tengah -->
        <div class="search-box">
          <input id="searchInput" placeholder="Cari lokasi atau koordinat (contoh: -5.943,106.152)..." />
          <button id="doSearch">Cari</button>
        </div>

        <!-- Tombol-tombol lainnya di sebelah kanan -->
        <button class="action-btn" id="addPointBtn">+ Titik Baru</button>
        <button id="basemapFlipBtn" class="mapFlipBtn" title="Peta Dasar">üó∫Ô∏è</button>
        <button id="togglePanelBtn" class="mapFlipBtn" title="Panel Layer">‚ò∞</button>
      </div>
    </div>

    <!-- Statistics Panel -->
    <div class="stats-panel" id="statsPanel">
      <div class="stats-header">
        <span>üìä Statistik EVI Panjang21</span>
        <button class="stats-close" id="statsClose" title="Tutup">‚úï</button>
      </div>
      
      <div class="progress-bar">
        <div class="progress-fill" id="dataProgress" style="width: 100%"></div>
      </div>
      
      <div class="stat-item">
        <span>Total Luasan:</span>
        <span class="stat-value" id="totalLuas">88.68 ha</span>
      </div>
      <div class="stat-item">
        <span>Jumlah Poligon:</span>
        <span class="stat-value" id="jumlahPoligon">6</span>
      </div>
      <div class="stat-item">
        <span>Kerapatan Rata-rata:</span>
        <span class="stat-value" id="kerapatanRata">3.5</span>
      </div>
      <div class="stat-item">
        <span>Luasan Tertinggi:</span>
        <span class="stat-value" id="luasMax">39.35 ha</span>
      </div>
      <div class="stat-item">
        <span>Luasan Terendah:</span>
        <span class="stat-value" id="luasMin">0.63 ha</span>
      </div>

      <!-- Filter Controls -->
      <div class="filter-controls">
        <div class="filter-title">Filter Kerapatan:</div>
        <div class="filter-buttons">
          <button class="filter-btn active" data-density="all">Semua</button>
          <button class="filter-btn" data-density="1">Sangat Rendah</button>
          <button class="filter-btn" data-density="2">Rendah</button>
          <button class="filter-btn" data-density="3">Sedang-Rendah</button>
          <button class="filter-btn" data-density="4">Sedang</button>
          <button class="filter-btn" data-density="5">Tinggi</button>
          <button class="filter-btn" data-density="6">Sangat Tinggi</button>
        </div>
      </div>

      <!-- Collapsible Chart Section -->
      <div class="collapsible" id="chartCollapsible">
        <div class="collapsible-header" id="chartHeader">
          <span>üìà Grafik Distribusi</span>
          <span>‚ñº</span>
        </div>
        <div class="collapsible-content">
          <div class="chart-container">
            <canvas id="densityChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Collapsible Detail Section -->
      <div class="collapsible" id="detailCollapsible">
        <div class="collapsible-header" id="detailHeader">
          <span>üîç Detail Kerapatan</span>
          <span>‚ñº</span>
        </div>
        <div class="collapsible-content">
          <div class="stat-item">
            <span>Sangat Rendah (1):</span>
            <span class="stat-value" id="detailSangatRendah">1 poligon</span>
          </div>
          <div class="stat-item">
            <span>Rendah (2):</span>
            <span class="stat-value" id="detailRendah">1 poligon</span>
          </div>
          <div class="stat-item">
            <span>Sedang-Rendah (3):</span>
            <span class="stat-value" id="detailSedangRendah">1 poligon</span>
          </div>
          <div class="stat-item">
            <span>Sedang (4):</span>
            <span class="stat-value" id="detailSedang">1 poligon</span>
          </div>
          <div class="stat-item">
            <span>Tinggi (5):</span>
            <span class="stat-value" id="detailTinggi">1 poligon</span>
          </div>
          <div class="stat-item">
            <span>Sangat Tinggi (6):</span>
            <span class="stat-value" id="detailSangatTinggi">1 poligon</span>
          </div>
        </div>
      </div>

      <button class="download-btn" id="downloadData">
        üì• Download Data GeoJSON
      </button>

      <button class="download-btn" id="screenshot" style="background: #6c757d; margin-top: 8px;">
        üì∑ Screenshot Peta
      </button>
    </div>

    <!-- Toolbar -->
    <div class="vtoolbar">
      <div class="vt-btn" id="zoomIn" title="Zoom In">+</div>
      <div class="vt-btn" id="zoomOut" title="Zoom Out">‚àí</div>
      <div class="vt-btn" id="measureBtn" title="Ukur Jarak">üìè</div>
      <div style="border-top:1px solid #eee; margin:6px 0"></div>
      <div class="vt-btn" id="drawPt" title="Titik">‚Ä¢</div>
      <div class="vt-btn" id="drawPoly" title="Poligon">‚ñ≥</div>
      <div class="vt-btn" id="drawRect" title="Persegi">‚ñ°</div>
      <div style="border-top:1px solid #eee; margin:6px 0"></div>
      <div class="vt-btn" id="deleteBtn" title="Hapus">üóëÔ∏è</div>
      <div class="vt-btn" id="printBtn" title="Cetak">üñ®Ô∏è</div>
    </div>

    <!-- Scale -->
    <div class="scale-box" id="scaleBox">Skala: 1:100,000</div>
    <div class="scale-box" id="measureBox" style="left:120px; display:none; background:#fff3cd; color:#856404;"></div>

    <!-- Right Panel -->
    <div class="right-panel" id="rightPanel">
      <div class="panel-inner">
        <div class="panel-header">
          <h3>Layer & Pengaturan</h3>
          <button id="closePanel" class="vt-btn" style="width:auto; padding:6px 10px;">‚úï</button>
        </div>

        <!-- Analisis Vegetasi Section -->
        <div class="analysis-section">
          <div style="font-weight:600; color:var(--mg-green); margin-bottom:12px;">üìä Data EVI Panjang21</div>
          
          <div class="pulau-selector">
            <label for="pulauSelect">Pilih Lokasi:</label>
            <select id="pulauSelect">
              <option value="panjang21" selected>Panjang21</option>
            </select>
          </div>

          <div class="pulau-selector">
            <label for="tahunSelect">Pilih Tahun:</label>
            <select id="tahunSelect">
              <option value="2024" selected>2024</option>
            </select>
          </div>

          <div class="data-display">
            <div class="data-item">
              <span>Vegetasi Sangat Rendah:</span>
              <span class="data-value" id="dataSangatRendah">1 poligon</span>
            </div>
            <div class="data-item">
              <span>Vegetasi Rendah:</span>
              <span class="data-value" id="dataRendah">1 poligon</span>
            </div>
            <div class="data-item">
              <span>Vegetasi Sedang-Rendah:</span>
              <span class="data-value" id="dataSedangRendah">1 poligon</span>
            </div>
            <div class="data-item">
              <span>Vegetasi Sedang:</span>
              <span class="data-value" id="dataSedang">1 poligon</span>
            </div>
            <div class="data-item">
              <span>Vegetasi Tinggi:</span>
              <span class="data-value" id="dataTinggi">1 poligon</span>
            </div>
            <div class="data-item">
              <span>Vegetasi Sangat Tinggi:</span>
              <span class="data-value" id="dataSangatTinggi">1 poligon</span>
            </div>
            <div class="data-item">
              <span>EVI Rata-rata:</span>
              <span class="data-value" id="dataEVI">0.58</span>
            </div>
          </div>
        </div>

        <div class="switch-row">
          <div class="switch-label">Layer EVI</div>
          <div class="switch on" id="rasterSwitch"><div class="knob"></div></div>
        </div>

        <div style="margin:16px 0;">
          <div style="font-weight:600; color:var(--mg-green); margin-bottom:12px;">Kelas Kerapatan EVI</div>
          <div id="classesList"></div>
        </div>

        <hr style="margin:16px 0; border:none; border-top:1px solid #e1e5e9;">

        <div style="font-weight:600; color:var(--mg-green); margin-bottom:12px;">Ekspor Data</div>
        <div class="file-upload" id="fileUploadArea">
          <div>üìÅ Upload File GeoJSON</div>
          <input type="file" id="fileInput" accept=".json,.geojson" style="display:none" />
        </div>
        <div class="file-hint">Format yang didukung: GeoJSON, JSON</div>

        <button class="download-btn" id="exportReport">
          üìÑ Export Laporan PDF
        </button>
      </div>
    </div>

    <!-- Basemap Panel -->
    <div class="basemap-toggle">
      <div class="basemap-card hidden" id="basemapCard">
        <div style="font-weight:600; margin-bottom:12px;">Peta Dasar</div>
        <div class="basemap-item active" data-basemap="osm">OpenStreetMap</div>
        <div class="basemap-item" data-basemap="satellite">Satelit</div>
        <div class="basemap-item" data-basemap="terrain">Topografi</div>
      </div>
    </div>
  </div>

  <script>
    // ==================== INISIALISASI PETA ====================
    const map = L.map('map').setView([-5.943, 106.152], 14);

    // Layer Dasar
    const basemaps = {
      'osm': L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors'
      }),
      'satellite': L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri'
      }),
      'terrain': L.tileLayer('https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg', {
        attribution: '¬© Stamen Design'
      })
    };

    let currentBasemap = 'satellite';
    basemaps[currentBasemap].addTo(map);

    // ==================== DATA GEOJSON EVI PANJANG21 ====================
    const eviPanjang21 = {
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "id": 1,
          "geometry": {
            "type": "MultiPolygon",
            "coordinates": [[[[106.15184077072178,-5.9438920323872795],[106.15184020650049,-5.9436206974019274],[106.15156921177824,-5.9436212622521039],[106.1515697758668,-5.94389259726342],[106.15184077072178,-5.9438920323872795]]],[[[106.15238219586629,-5.9436195673030632],[106.15238276035289,-5.9438909022364674],[106.15211176555043,-5.9438914673782959],[106.15211232993057,-5.9441628023349304],[106.15238332486571,-5.9441622371671254],[106.15265431977464,-5.9441616718664712],[106.15265375512914,-5.943890336961795],[106.15265319050988,-5.9436190020543744],[106.15238219586629,-5.9436195673030632]]],[[[106.15102722225512,-5.9436223915539426],[106.15129821702978,-5.9436218269694425],[106.15129765310007,-5.9433504919295057],[106.15075566378989,-5.9433516209137709],[106.15075622745427,-5.9436229560056058],[106.15102722225512,-5.9436223915539426]]],[[[106.15238219586629,-5.9436195673030632],[106.15238163140596,-5.9433482323669988],[106.15211063686881,-5.9433487974568724],[106.1521112011965,-5.9436201324189142],[106.15238219586629,-5.9436195673030632]]],[[[106.15021311100213,-5.9430814142202886],[106.15021367437495,-5.9433527493667091],[106.15048466909553,-5.9433521852066571],[106.15048410559001,-5.9430808500861696],[106.15021311100213,-5.9430814142202886]]],[[[106.14940012708132,-5.9430831058256919],[106.14939956413262,-5.9428117705987766],[106.1491285695727,-5.9428123341756827],[106.14912913238875,-5.9430836694285079],[106.14940012708132,-5.9430831058256919]]],[[[106.15021311100213,-5.9430814142202886],[106.15021254765544,-5.9428100790711396],[106.14994155317402,-5.9428106430465055],[106.14994211638802,-5.9430819782215831],[106.15021311100213,-5.9430814142202886]]],[[[106.14885757498659,-5.9428128976197696],[106.14885701232937,-5.9425415623382971],[106.14858601784977,-5.9425421256236666],[106.14858658037436,-5.9428134609310366],[106.14885757498659,-5.9428128976197696]]],[[[106.1575305226209,-5.9433374704215209],[106.15752995566621,-5.9430661359774684],[106.15780094954496,-5.9430655682570794],[106.15780038248396,-5.9427942338363966],[106.15779981544931,-5.9425228994129684],[106.15752882183588,-5.9425234670811582],[106.15752938873787,-5.9427948015306864],[106.15725839496548,-5.942795369092158],[106.15725896176117,-5.9430667035650329],[106.15725952858318,-5.9433380380351792],[106.1575305226209,-5.9433374704215209]]],[[[106.15834123532349,-5.9422504293042966],[106.15834066807629,-5.9419790949276958],[106.15779868145908,-5.9419802305580784],[106.15779924844102,-5.9422515649868961],[106.15834123532349,-5.9422504293042966]]],[[[106.14858489287901,-5.9419994550008965],[106.14858433043285,-5.941728119685429],[106.14831333632503,-5.9417286827603091],[106.14777134803099,-5.9417298085116839],[106.14777191007927,-5.9420011439048075],[106.14858489287901,-5.9419994550008965]]],[[[106.14966886957933,-5.9419972012697908],[106.14939787544348,-5.9419977649017692],[106.14939731259942,-5.941726429664012],[106.14912631857007,-5.9417269931372791],[106.14885532451456,-5.9417275564777512],[106.14885588709333,-5.9419988917673212],[106.14858489287901,-5.9419994550008965],[106.14858545535131,-5.9422707903136534],[106.14966943258217,-5.9422685364789221],[106.14966886957933,-5.9419972012697908]]],[[[106.15048410559001,-5.9430808500861696],[106.15102609468725,-5.9430797214194548],[106.15102553094263,-5.9428083863481271],[106.15183851399404,-5.9428066924297394],[106.15183907813663,-5.9430780274231916],[106.15211007256733,-5.9430774624921199],[106.15210950829209,-5.9428061275246389],[106.15238050256389,-5.9428055624867193],[106.15237824519457,-5.9417202226935935],[106.1521072514533,-5.941720787627605],[106.15183625768582,-5.9417213524288233],[106.15183682172355,-5.9419926874331175],[106.15156582779721,-5.9419932521275065],[106.15156639172851,-5.942264587155055],[106.15129539764334,-5.9422651517426006],[106.15129427007219,-5.9417224816328753],[106.15102327622608,-5.9417230460357082],[106.15075228235376,-5.941723610305746],[106.15075171887275,-5.9414522751949024],[106.1502097313148,-5.9414534032847195],[106.15021029453057,-5.9417247384474381],[106.14966830660265,-5.9417258660579497],[106.14966886957933,-5.9419972012697908],[106.14993986368901,-5.9419966375050102],[106.1499404268245,-5.942267972688219],[106.15021142104065,-5.9422674087647103],[106.15021254765544,-5.9428100790711396],[106.15048354211069,-5.9428095149629554],[106.15048410559001,-5.9430808500861696]],[[106.15210894404304,-5.9425347925544134],[106.15183794987766,-5.9425353574335427],[106.15183738578749,-5.9422640224347028],[106.15210837982023,-5.942263457581543],[106.15210894404304,-5.9425347925544134]]],[[[106.15942350551799,-5.941434153520996],[106.15915251259331,-5.9414347218815129],[106.15915308018566,-5.9417060561851827],[106.15942407324296,-5.9417054877985311],[106.15942350551799,-5.941434153520996]]],[[[106.14614482129568,-5.9414618470277141],[106.14614426009537,-5.9411905114740406],[106.14587326601777,-5.941191073302087],[106.14587382708548,-5.9414624088815957],[106.14614482129568,-5.9414618470277141]]],[[[106.14777134803099,-5.9417298085116839],[106.14777078600886,-5.9414584731158326],[106.14695780376972,-5.9414601606693278],[106.14695724217157,-5.9411888251932004],[106.14668624817227,-5.9411893874195982],[106.14668680963781,-5.9414607229215797],[106.14641581547977,-5.9414612850410418],[106.1464163768388,-5.9417326205661967],[106.14668737112945,-5.9417320584208859],[106.146958365394,-5.9417314961427783],[106.14695892704441,-5.942002831613503],[106.14722992141544,-5.94200226917674],[106.14722935963242,-5.9417309337318773],[106.14777134803099,-5.9417298085116839]]],[[[106.15942350551799,-5.941434153520996],[106.15969449841629,-5.9414335850276911],[106.15969393058509,-5.9411622507736208],[106.15942293781941,-5.9411628192407839],[106.15942350551799,-5.941434153520996]]],[[[106.14560171100511,-5.9409202993892816],[106.14533071700799,-5.9409208609259361],[106.14533127778439,-5.9411921965598253],[106.1456022719141,-5.9411916349973479],[106.14560171100511,-5.9409202993892816]]],[[[106.15969393058509,-5.9411622507736208],[106.15996492332438,-5.9411616821736786],[106.15996435538698,-5.9408903479430286],[106.15969336278029,-5.9408909165168238],[106.15969393058509,-5.9411622507736208]]],[[[106.15996435538698,-5.9408903479430286],[106.16023534796727,-5.9408897792364579],[106.16023477992364,-5.9406184450292505],[106.15996378747597,-5.9406190137096671],[106.15996435538698,-5.9408903479430286]]],[[[106.1439751865442,-5.940652330851905],[106.14424618053897,-5.9406517700049353],[106.14424562034515,-5.9403804342623729],[106.14370363259472,-5.9403815557719595],[106.14370419252336,-5.9406528915661019],[106.1439751865442,-5.940652330851905]]],[[[106.14289009126907,-5.9401119011664489],[106.14289065077384,-5.9403832370405931],[106.14316164474016,-5.940382676750481],[106.14343263868044,-5.940382116327604],[106.14343207891044,-5.9401107805050053],[106.14289009126907,-5.9401119011664489]]],[[[106.15806570571694,-5.9400803219143929],[106.15779471332343,-5.9400808894804502],[106.15779528012088,-5.9403522239282269],[106.15752428756842,-5.9403527913876255],[106.15752485425966,-5.9406241258588244],[106.15779584694471,-5.9406235583733267],[106.15779641379488,-5.9408948928156979],[106.15752542097721,-5.9408954603272948],[106.15752598772113,-5.9411667947930553],[106.15752655449138,-5.9414381292560892],[106.15752712128798,-5.9417094637164434],[106.15779811450351,-5.9417088961265501],[106.15779698067141,-5.9411662272553594],[106.1588809522089,-5.9411639557767657],[106.15888038480193,-5.940892621441562],[106.15915137748779,-5.94089205326609],[106.15915024248777,-5.9403493846397906],[106.15887925006716,-5.940349952763003],[106.15887981742135,-5.9406212871036459],[106.15833783223574,-5.9406224230040232],[106.15833726514673,-5.9403510886111413],[106.15806627264699,-5.9403516563360652],[106.15806570571694,-5.9400803219143929]]],[[[106.16077562820136,-5.9400746389522165],[106.16050463607171,-5.9400752078458376],[106.16050577234489,-5.9406178762160646],[106.16077676473974,-5.9406173072701129],[106.16131874945017,-5.9406161689799033],[106.16131818090258,-5.9403448348746428],[106.16077619645733,-5.940345973112505],[106.16077562820136,-5.9400746389522165]]],[[[106.14289009126907,-5.9401119011664489],[106.14288953179022,-5.9398405652895798],[106.14234754430993,-5.9398416853684655],[106.14234810352353,-5.9401130212968543],[106.14261909740929,-5.9401124612980327],[106.14289009126907,-5.9401119011664489]]],[[[106.15914910759331,-5.9398067160026811],[106.15914967502735,-5.9400780503225992],[106.159420667289,-5.94007748209276],[106.15942009972238,-5.9398061477989774],[106.15914910759331,-5.9398067160026811]]],[[[106.16158860443178,-5.9400729314748189],[106.16158803580447,-5.9398015973903382],[106.16131704388671,-5.9398021666560439],[106.16131761238142,-5.9400735007667071],[106.16158860443178,-5.9400729314748189]]],[[[106.14668624817227,-5.9411893874195982],[106.14668512531948,-5.9406467164074703],[106.14641413155928,-5.9406472784493873],[106.14641357030463,-5.940375942913394],[106.14614257665097,-5.9403765047966948],[106.1458715829712,-5.9403770665472324],[106.14587102200784,-5.9401057309568843],[106.14560002843459,-5.9401062925488253],[106.14559946762989,-5.9398349569299214],[106.14532847416316,-5.9398355183632789],[106.14505748067036,-5.9398360796638832],[106.14478648715149,-5.939836640831734],[106.14478592677062,-5.9395653051326329],[106.14424393991989,-5.9395664270184678],[106.1442445000356,-5.9398377627691739],[106.14343151916644,-5.9398394446796798],[106.14343207891044,-5.9401107805050053],[106.14451605388091,-5.9401085375889933],[106.1445166141813,-5.940379873308431],[106.14505860177546,-5.9403787510022488],[106.14505804120988,-5.9401074153344302],[106.14532903483526,-5.9401068540080075],[106.14532959553344,-5.9403781896500085],[106.14560058926536,-5.9403776281650034],[106.14560171100511,-5.9409202993892816],[106.14587270497618,-5.9409197377198506],[106.14587214396067,-5.9406484021349044],[106.14614313777302,-5.9406478403585323],[106.14614369892115,-5.9409191759176414],[106.14641469284004,-5.9409186139826531],[106.14641525414685,-5.9411899495132117],[106.14668624817227,-5.9411893874195982]]],[[[106.16104491529748,-5.9392600675071661],[106.16077392359196,-5.9392606364550264],[106.16077449176866,-5.9395319706234453],[106.16104548360676,-5.939531401649413],[106.16104491529748,-5.9392600675071661]]],[[[106.16212831304206,-5.9389864563481405],[106.16212774425534,-5.9387151223052062],[106.16185675292071,-5.9387156917316242],[106.16185732157483,-5.9389870258007544],[106.16212831304206,-5.9389864563481405]]],[[[106.16104491529748,-5.9392600675071661],[106.16131590697654,-5.9392594984265683],[106.16131533856112,-5.9389881643077906],[106.16158633008118,-5.9389875951206381],[106.1615851930645,-5.9384449269272528],[106.16131420180956,-5.9384454960620356],[106.16131477017213,-5.9387168301862845],[106.16104377875817,-5.9387173992145286],[106.1610443470146,-5.9389887333622102],[106.16104491529748,-5.9392600675071661]]],[[[106.1623975978044,-5.9381718847044684],[106.16212660676133,-5.9381724542112071],[106.16212717549514,-5.9384437882595282],[106.16239816667073,-5.9384432187265865],[106.1623975978044,-5.9381718847044684]]],[[[106.1623975978044,-5.9381718847044684],[106.16266858882103,-5.9381713150650173],[106.16266801984862,-5.9378999810663631],[106.16239702896453,-5.9379005506796059],[106.1623975978044,-5.9381718847044684]]],[[[106.16266801984862,-5.9378999810663631],[106.16293901070625,-5.9378994113204149],[106.16293844162779,-5.9376280773452654],[106.16266745090267,-5.9376286470650008],[106.16266801984862,-5.9378999810663631]]],[[[106.16402183468124,-5.937354463266364],[106.16320886314185,-5.9373561735411755],[106.16320943232638,-5.93762750749283],[106.16348042299852,-5.9376269375076944],[106.16402240426336,-5.9376257971393196],[106.16402183468124,-5.937354463266364]]],[[[106.14315493080844,-5.9371266463910324],[106.14288393843287,-5.9371272063719172],[106.14288505689622,-5.9376698781771156],[106.14261406422958,-5.9376704380768315],[106.14261462336775,-5.937941774001132],[106.14207263769137,-5.9379428934539558],[106.14207319659045,-5.9382142294270555],[106.1418022035807,-5.9382147889801447],[106.14180276237322,-5.9384861249762473],[106.14207375551551,-5.9384855653974133],[106.14234474863179,-5.9384850056858554],[106.14234418957417,-5.9382136697412475],[106.14288617546367,-5.9382125499714817],[106.14288561616694,-5.9379412140756518],[106.14342760168726,-5.9379400938265592],[106.14342704215147,-5.9376687579795666],[106.14315604953687,-5.9376693181446933],[106.14315493080844,-5.9371266463910324]]],[[[106.16402183468124,-5.937354463266364],[106.16429282514142,-5.9373538929093721],[106.16456381557505,-5.9373533224196855],[106.16456324575437,-5.9370819885965505],[106.16456267596018,-5.9368106547706896],[106.16429168579158,-5.9368112252078724],[106.16429225545325,-5.9370825590599852],[106.16402126512563,-5.9370831293907322],[106.16402183468124,-5.937354463266364]]],[[[106.14315493080844,-5.9371266463910324],[106.14342592315798,-5.9371260862774555],[106.14342536370026,-5.9368547504223388],[106.14369635589131,-5.9368541902018501],[106.14369579632708,-5.9365828543697559],[106.14342480426858,-5.9365834145644651],[106.14315381218408,-5.9365839746264912],[106.14315493080844,-5.9371266463910324]]],[[[106.16591762640557,-5.9368078005945417],[106.16591705597536,-5.9365364668972669],[106.16564606607182,-5.9365370379715783],[106.16564663636953,-5.9368083716951343],[106.16591762640557,-5.9368078005945417]]],[[[106.16456267596018,-5.9368106547706896],[106.1648336661023,-5.9368100842008227],[106.16483309620212,-5.9365387503984577],[106.16510408618521,-5.9365381797221737],[106.1653750761418,-5.9365376089132136],[106.16537450600313,-5.9362662751607562],[106.16456153645134,-5.9362679871108197],[106.16456267596018,-5.9368106547706896]]],[[[106.16781341322542,-5.9362611321464227],[106.16781284192082,-5.9359897986279373],[106.16754185246813,-5.9359903705783275],[106.16754242364027,-5.9362617041231349],[106.16781341322542,-5.9362611321464227]]],[[[106.14369579632708,-5.9365828543697559],[106.14396678835959,-5.9365822940423669],[106.1439662286889,-5.9363109582334372],[106.14423722056277,-5.9363103977991614],[106.14423666078564,-5.9360390620133003],[106.14396566904422,-5.9360396224217826],[106.14396510942561,-5.935768286607404],[106.14342312612966,-5.9357694069747975],[106.14342256680207,-5.9354980711061094],[106.14315157524759,-5.9354986310650384],[106.14288058366702,-5.93549919089131],[106.14288114272964,-5.9357705268115408],[106.14315213444269,-5.9357699669595005],[106.14315269366379,-5.9360413028512209],[106.14342368548328,-5.9360407428407438],[106.14342424486291,-5.936312078703966],[106.14369523678891,-5.9363115185350388],[106.14369579632708,-5.9365828543697559]]],[[[106.16862466679474,-5.9354454150936506],[106.16835367768685,-5.9354459873893424],[106.168353106197,-5.9351746539154133],[106.16808211719497,-5.9351752260521193],[106.16808268855236,-5.9354465595523838],[106.1680832599363,-5.9357178930500067],[106.16835424920329,-5.9357173208606273],[106.16862523844368,-5.9357167485385931],[106.16862466679474,-5.9354454150936506]]],[[[106.16808211719497,-5.9351752260521193],[106.16808154586418,-5.9349038925491113],[106.16781055696809,-5.9349044645268432],[106.16781112816636,-5.9351757980561803],[106.16808211719497,-5.9351752260521193]]],[[[106.16862466679474,-5.9354454150936506],[106.16889565587606,-5.9354448426653077],[106.16889508412125,-5.9351735092440707],[106.16916607304347,-5.9351729367094332],[106.16916550118285,-5.9349016033118076],[106.16889451239305,-5.9349021758200911],[106.16862352357667,-5.9349027481957366],[106.16862466679474,-5.9354454150936506]]],[[[106.16889394069145,-5.9346308423934024],[106.16889336901644,-5.934359508963972],[106.16862238046501,-5.9343600812869202],[106.16862295200754,-5.9346314147426993],[106.16889394069145,-5.9346308423934024]]],[[[106.16862123745972,-5.9338174143673363],[106.16862066599698,-5.9335460809034641],[106.16834967781631,-5.9335466530147585],[106.16835024914661,-5.9338179865049723],[106.16862123745972,-5.9338174143673363]]],[[[106.16807754729304,-5.933004557952219],[106.16807811843775,-5.9332758914741692],[106.16834910651261,-5.9332753195218189],[106.16834853523549,-5.933003986026204],[106.16807754729304,-5.933004557952219]]],[[[106.14043496585467,-5.9322481893250556],[106.14043440832189,-5.9319768531380541],[106.14016341820333,-5.9319774113035617],[106.14016397560368,-5.9322487475162706],[106.14043496585467,-5.9322481893250556]]],[[[106.16807754729304,-5.933004557952219],[106.16807640508341,-5.932461890900127],[106.16780541737927,-5.9324624626408848],[106.16780427554079,-5.931919795525368],[106.16753328807485,-5.9319203670808953],[106.16753271732787,-5.931649033492735],[106.16726172996779,-5.9316496048893725],[106.1672628712235,-5.9321922721156053],[106.16699188357204,-5.9321928434323006],[106.16699359525762,-5.9330068443303192],[106.16699416587257,-5.9332781779575541],[106.16726515405374,-5.9332776065356105],[106.16726572482771,-5.9335489401338588],[106.16699473651414,-5.9335495115821137],[106.16699530718225,-5.9338208452039485],[106.16672431870964,-5.9338214165459018],[106.16672488927185,-5.9340927501913345],[106.16645390064028,-5.9340933214269729],[106.16645447109657,-5.9343646550959619],[106.16591249348889,-5.9343657972219601],[106.16591306370682,-5.9346371309408896],[106.16510009669886,-5.934638843214012],[106.16510066654592,-5.9349101770090265],[106.16537165570759,-5.9349096063576825],[106.16537222571364,-5.9351809401237183],[106.16510123641952,-5.9351815108013319],[106.16510066654592,-5.9349101770090265],[106.16428769890193,-5.9349118881672229],[106.16428883788076,-5.9354545559066345],[106.16374685878901,-5.9354556961205374],[106.1637462895513,-5.9351843621997196],[106.16239134202092,-5.9351872102819705],[106.16239191059624,-5.9354585443338923],[106.16184993113391,-5.93545968269067],[106.1618504994707,-5.9357310167923476],[106.16157950956737,-5.9357315857979502],[106.16158007779812,-5.9360029199230739],[106.16076710753208,-5.9360046262224619],[106.16076767539175,-5.936275960423397],[106.16049668511775,-5.936276528950696],[106.1602256948173,-5.9362770973453243],[106.1602262624384,-5.9365484315958561],[106.15995527197906,-5.9365489998839687],[106.15995583949403,-5.9368203341580292],[106.15887187686263,-5.9368226060882598],[106.15887244387396,-5.9370939404641145],[106.15860145301764,-5.9370945081410875],[106.15860088613883,-5.9368231737391097],[106.15832989538865,-5.9368237412572764],[106.15832932866873,-5.936552406826423],[106.15805833802474,-5.9365529741857967],[106.15805890461213,-5.9368243086427608],[106.15778791380923,-5.9368248758955602],[106.15778848029051,-5.9370962103758691],[106.1580594712259,-5.9370956430969644],[106.15806060453251,-5.9376383119972465],[106.15806117122534,-5.937909646443325],[106.15779017989233,-5.9379102138005422],[106.15779074647899,-5.9381815482700144],[106.15779187973135,-5.9387242172008312],[106.15806287146201,-5.9387236497652989],[106.15806400508491,-5.9392663186330497],[106.1580645719359,-5.9395376530628523],[106.15833556403787,-5.9395370854162604],[106.15833613104779,-5.9398084198172914],[106.15887811543786,-5.9398072840736349],[106.15914910759331,-5.9398067160026811],[106.15914854018565,-5.9395353816800185],[106.15887754816276,-5.9395359497248439],[106.15887698091406,-5.9392646153733928],[106.15860598899741,-5.9392651832593497],[106.15860542190761,-5.9389938488790657],[106.15941839718083,-5.9389921449013681],[106.15941953218216,-5.9395348135024504],[106.15969052415225,-5.9395342451921369],[106.15968995650582,-5.9392629109190924],[106.15996094831698,-5.9392623425021824],[106.15996151609598,-5.9395336767490807],[106.16023250801329,-5.9395331081732792],[106.16023194010172,-5.939261773952536],[106.16023080435781,-5.9387191055029014],[106.16050179585099,-5.9387185368728357],[106.16077278731778,-5.9387179681100442],[106.16104377875817,-5.9387173992145286],[106.16104321052815,-5.9384460650641007],[106.16131420180956,-5.9384454960620356],[106.16131363347344,-5.9381741619351454],[106.16158462459582,-5.9381735928265451],[106.16158405615357,-5.9379022587230947],[106.16185504711702,-5.9379016895079717],[106.16185391004677,-5.9373590213453058],[106.16158291934839,-5.9373595905080476],[106.16158178264898,-5.9368169222821958],[106.16131079218923,-5.936817491259875],[106.16131022401169,-5.9365461571166422],[106.16185220463974,-5.9365450190809756],[106.16185277308233,-5.9368163531718343],[106.16212376348919,-5.9368157839287905],[106.16212319491412,-5.9365444498641269],[106.16266517538351,-5.936543311032402],[106.16266460656989,-5.9362719770175261],[106.16320658666841,-5.9362708377075313],[106.16320715574706,-5.9365421716699727],[106.16347814588914,-5.9365416017897434],[106.16347871512676,-5.9368129357233332],[106.16402069559646,-5.9368117955123756],[106.16401955661765,-5.9362691277475141],[106.16429054654776,-5.9362685574955014],[106.16428940740992,-5.9357258897723275],[106.16510237624624,-5.9357241783778161],[106.16510180631963,-5.9354528445908956],[106.16618576386686,-5.9354505609794579],[106.16618462303333,-5.9349078936078179],[106.1672685790961,-5.9349056080843887],[106.16726800818927,-5.9346342744996994],[106.16753899700606,-5.9346337028135645],[106.16753785500725,-5.9340910356886969],[106.16780884353257,-5.9340904639225771],[106.16780655932409,-5.9330051297456379],[106.16807754729304,-5.933004557952219]],[[106.16050065994759,-5.9381758684646631],[106.16077165114929,-5.9381752997542039],[106.16077221922032,-5.9384466339334452],[106.16050122788609,-5.9384472026700701],[106.16050065994759,-5.9381758684646631]]],[[[106.14016230348048,-5.9314347388699629],[106.13989131360078,-5.9314352968514914],[106.13989187081684,-5.9317066330953612],[106.14016286082894,-5.9317060750881323],[106.14016230348048,-5.9314347388699629]]],[[[106.14016230348048,-5.9314347388699629],[106.14043329333423,-5.9314341807558693],[106.14043273587934,-5.9311628445607694],[106.14016174615797,-5.9311634026491564],[106.14016230348048,-5.9314347388699629]]],[[[106.16644477694979,-5.9297519823543281],[106.16644534698133,-5.9300233160666718],[106.16671633362684,-5.9300227452255267],[106.16671576346293,-5.9297514115394812],[106.16644477694979,-5.9297519823543281]]],[[[106.16644477694979,-5.9297519823543281],[106.16644420694479,-5.9294806486392764],[106.16617322053744,-5.9294812192953064],[106.1661737904101,-5.9297525530366499],[106.16644477694979,-5.9297519823543281]]],[[[106.13933708739626,-5.9254670132379044],[106.13933597471245,-5.9249243405204357],[106.13933541840944,-5.9246530041576309],[106.13960640503306,-5.9246524470834494],[106.13960584862375,-5.9243811107435986],[106.13906387561508,-5.9243822247081788],[106.13906498793071,-5.9249248974878856],[106.13906554412736,-5.9251962338736535],[106.13906610034998,-5.9254675702567177],[106.13933708739626,-5.9254670132379044]]],[[[106.15531850886194,-5.9221778965721121],[106.15558949275493,-5.9221773319201114],[106.15558892878033,-5.9219059970824066],[106.15504696123246,-5.92190712620196],[106.15504752494266,-5.9221784610917574],[106.15531850886194,-5.9221778965721121]]],[[[106.15829819967095,-5.9216290089641443],[106.15856918300999,-5.9216284429084816],[106.15884016632265,-5.9216278767204766],[106.15883960081464,-5.9213565421903729],[106.15856861763415,-5.9213571083522547],[106.15856805228469,-5.9210857737933784],[106.15829706920998,-5.9210863397968101],[106.15802608610898,-5.9210869056679112],[106.15775510298155,-5.9210874714066852],[106.15667117020851,-5.9210897330384835],[106.15667173463291,-5.9213610677800412],[106.15721370133639,-5.9213599371766366],[106.15748468464864,-5.9213593716764317],[106.15748524949579,-5.9216307063370826],[106.15775623291387,-5.9216301406784444],[106.15775736295159,-5.9221728099393625],[106.15802834660767,-5.9221722440961759],[106.15802778144351,-5.9219009094931803],[106.15829876494099,-5.9219003435437498],[106.15829819967095,-5.9216290089641443],[106.1580272163056,-5.921629574887465],[106.15802665119409,-5.9213582402790141],[106.1582976344273,-5.9213576743818015],[106.15829819967095,-5.9216290089641443]]],[[[106.15667117020851,-5.9210897330384835],[106.15667060581055,-5.9208183982942257],[106.15639962268357,-5.9208189633452779],[106.15640018694944,-5.9210902981156099],[106.15667117020851,-5.9210897330384835]]],[[[106.15504470665434,-5.92082178661569],[106.15504414307553,-5.9205504517123684],[106.15477315992297,-5.9205510159434427],[106.1547737233696,-5.9208223508728004],[106.15504470665434,-5.92082178661569]]]]
          },
          "properties":{
            "OBJECTID":1,
            "Id":1,
            "gridcode":5,
            "Shape_Length":19559.999999999069,
            "Shape_Area":393300.00000032131,
            "luasan":39.345480994949199
          }
        },
        {
          "type": "Feature",
          "id": 2,
          "geometry": {
            "type": "MultiPolygon",
            "coordinates": [[[[106.15292644429243,-5.9447037761822044],[106.15292587946179,-5.9444324413089236],[106.15265488444639,-5.9444330067684179],[106.1526554491444,-5.9447043416676868],[106.15292644429243,-5.9447037761822044]]],[[[106.1523838894048,-5.944433572095055],[106.15238332486571,-5.9441622371671254],[106.15211232993057,-5.9441628023349304],[106.15211289433694,-5.9444341372888374],[106.1523838894048,-5.944433572095055]]],[[[106.15021367437495,-5.9433527493667091],[106.15021311100213,-5.9430814142202886],[106.14994211638802,-5.9430819782215831],[106.1499426796282,-5.9433533133939305],[106.15021367437495,-5.9433527493667091]]],[[[106.14750203967003,-5.9425443774370033],[106.14750147770216,-5.9422730420234604],[106.14723048322455,-5.9422736046188929],[106.14723104505978,-5.9425449400583021],[106.14750203967003,-5.9425443774370033]]],[[[106.14695892704441,-5.942002831613503],[106.146958365394,-5.9417314961427783],[106.14668737112945,-5.9417320584208859],[106.1466879326472,-5.9420033939174637],[106.14695892704441,-5.942002831613503]]],[[[106.15779868145908,-5.9419802305580784],[106.15779811450351,-5.9417088961265501],[106.15752712128798,-5.9417094637164434],[106.15752768811095,-5.94198079817407],[106.15779868145908,-5.9419802305580784]]],[[[106.14587382708548,-5.9414624088815957],[106.14587438817924,-5.9417337444584293],[106.14614538252208,-5.9417331825787105],[106.14614482129568,-5.9414618470277141],[106.14587382708548,-5.9414624088815957]]],[[[106.14587382708548,-5.9414624088815957],[106.14587326601777,-5.941191073302087],[106.1456022719141,-5.9411916349973479],[106.14533127778439,-5.9411921965598253],[106.14533183858684,-5.9414635321909905],[106.14587382708548,-5.9414624088815957]]],[[[106.15996492332438,-5.9411616821736786],[106.15969393058509,-5.9411622507736208],[106.15969449841629,-5.9414335850276911],[106.15996549128818,-5.9414330164016009],[106.15996492332438,-5.9411616821736786]]],[[[106.15752598772113,-5.9411667947930553],[106.15752542097721,-5.9408954603272948],[106.15725442813323,-5.9408960277061169],[106.15725499474452,-5.9411673621979704],[106.15752598772113,-5.9411667947930553]]],[[[106.15996492332438,-5.9411616821736786],[106.16023591603727,-5.9411611134409537],[106.16023534796727,-5.9408897792364579],[106.15996435538698,-5.9408903479430286],[106.15996492332438,-5.9411616821736786]]],[[[106.14451773486022,-5.9409225447392293],[106.14451717450773,-5.9406512090251935],[106.14424618053897,-5.9406517700049353],[106.14424674075886,-5.94092310574477],[106.14451773486022,-5.9409225447392293]]],[[[106.16077733304854,-5.9408886414249951],[106.16077676473974,-5.9406173072701129],[106.16050577234489,-5.9406178762160646],[106.1605063405211,-5.9408892103971125],[106.16077733304854,-5.9408886414249951]]],[[[106.1434331984765,-5.9406534521475285],[106.14343263868044,-5.940382116327604],[106.14316164474016,-5.940382676750481],[106.14316220440359,-5.9406540125961804],[106.1434331984765,-5.9406534521475285]]],[[[106.16158974176572,-5.9406155996356453],[106.16158917308555,-5.9403442655565701],[106.16131818090258,-5.9403448348746428],[106.16131874945017,-5.9406161689799033],[106.16158974176572,-5.9406155996356453]]],[[[106.15887868273931,-5.9400786184196823],[106.15887811543786,-5.9398072840736349],[106.15833613104779,-5.9398084198172914],[106.1583366980841,-5.9400797542155805],[106.15887868273931,-5.9400786184196823]]],[[[106.16185959645574,-5.9400723620501727],[106.16185902769584,-5.9398010279918845],[106.16158803580447,-5.9398015973903382],[106.16158860443178,-5.9400729314748189],[106.16185959645574,-5.9400723620501727]]],[[[106.14180388003622,-5.939028796960427],[106.14180332119173,-5.9387574609697067],[106.14153232789089,-5.938758020441556],[106.14153288660282,-5.939029356458013],[106.14180388003622,-5.939028796960427]]],[[[106.16077278731778,-5.9387179681100442],[106.16050179585099,-5.9387185368728357],[106.16050293186004,-5.9392612052701503],[106.16077392359196,-5.9392606364550264],[106.16104491529748,-5.9392600675071661],[106.1610443470146,-5.9389887333622102],[106.16077335544165,-5.9389893022838995],[106.16077278731778,-5.9387179681100442]]],[[[106.16266915781991,-5.938442649060927],[106.16266858882103,-5.9381713150650173],[106.1623975978044,-5.9381718847044684],[106.16239816667073,-5.9384432187265865],[106.16266915781991,-5.938442649060927]]],[[[106.15779074647899,-5.9381815482700144],[106.15779017989233,-5.9379102138005422],[106.15751918853297,-5.9379107810250531],[106.15751975498709,-5.9381821155206236],[106.15779074647899,-5.9381815482700144]]],[[[106.14207207881827,-5.9376715574781489],[106.14207263769137,-5.9379428934539558],[106.14261462336775,-5.937941774001132],[106.14261406422958,-5.9376704380768315],[106.14207207881827,-5.9376715574781489]]],[[[106.16348099234209,-5.9378982714303952],[106.16348042299852,-5.9376269375076944],[106.16320943232638,-5.93762750749283],[106.16321000153741,-5.9378988414417577],[106.16348099234209,-5.9378982714303952]]],[[[106.14207207881827,-5.9376715574781489],[106.14207151997118,-5.9374002214996171],[106.14180052735907,-5.937400780975473],[106.14180108607364,-5.9376721169797495],[106.14207207881827,-5.9376715574781489]]],[[[106.16456438542222,-5.9376246562401445],[106.16456381557505,-5.9373533224196855],[106.16429282514142,-5.9373538929093721],[106.16429339485607,-5.937625226756083],[106.16456438542222,-5.9376246562401445]]],[[[106.1439695871035,-5.9379389730466219],[106.14396734805626,-5.9368536298486738],[106.14369635589131,-5.9368541902018501],[106.14369859440839,-5.9379395335029459],[106.1439695871035,-5.9379389730466219]]],[[[106.16646017711979,-5.9370779916372438],[106.16645960639801,-5.9368066579953105],[106.16591762640557,-5.9368078005945417],[106.16591819686236,-5.9370791342890552],[106.16646017711979,-5.9370779916372438]]],[[[106.16700215727109,-5.937076848454681],[106.16700158628426,-5.9368055148653553],[106.1667305963544,-5.9368060864966736],[106.16673116720871,-5.9370774201123062],[106.16700215727109,-5.937076848454681]]],[[[106.16510522627713,-5.9370808472716154],[106.16510465621791,-5.9368095134982752],[106.16510408618521,-5.9365381797221737],[106.16483309620212,-5.9365387503984577],[106.1648336661023,-5.9368100842008227],[106.16483423602899,-5.9370814180004272],[106.16510522627713,-5.9370808472716154]]],[[[106.16564663636953,-5.9368083716951343],[106.16564606607182,-5.9365370379715783],[106.1653750761418,-5.9365376089132136],[106.165375646307,-5.9368089426630455],[106.16564663636953,-5.9368083716951343]]],[[[106.14288282007352,-5.9365845345558386],[106.14288226093291,-5.9363131986437967],[106.14261126892885,-5.9363137584147001],[106.14261182793697,-5.9365850943525045],[106.14288282007352,-5.9365845345558386]]],[[[106.14288170181825,-5.9360418627290299],[106.14288114272964,-5.9357705268115408],[106.14261015099059,-5.9357710865309183],[106.14261070994671,-5.9360424224741708],[106.14288170181825,-5.9360418627290299]]],[[[106.16835482074633,-5.9359886543291704],[106.16835424920329,-5.9357173208606273],[106.1680832599363,-5.9357178930500067],[106.16808383134685,-5.9359892265448853],[106.16835482074633,-5.9359886543291704]]],[[[106.1667169038173,-5.9302940789088483],[106.16671633362684,-5.9300227452255267],[106.16644534698133,-5.9300233160666718],[106.16617436030928,-5.9300238867752881],[106.16617493023506,-5.9302952205112023],[106.16617550018729,-5.930566554244443],[106.16644648712408,-5.9305659834832403],[106.166447627373,-5.9311086508889819],[106.16698960169647,-5.9311075088637422],[106.16698903129395,-5.9308361752148304],[106.16671804427789,-5.9308367462674214],[106.1667169038173,-5.9302940789088483]]],[[[106.13906554412736,-5.9251962338736535],[106.13906498793071,-5.9249248974878856],[106.13879400112296,-5.9249254543229171],[106.13879455718742,-5.9251967907343612],[106.13906554412736,-5.9251962338736535]]],[[[106.1390622073361,-5.9235682155184408],[106.13906109527973,-5.9230255427117529],[106.13879010939759,-5.9230260993670516],[106.13879122118954,-5.9235687722250914],[106.1390622073361,-5.9235682155184408]]],[[[106.15748637926917,-5.9221733756501944],[106.15748581436929,-5.9219020409949987],[106.15721483079273,-5.9219026065473859],[106.1572153955604,-5.9221739412286736],[106.15748637926917,-5.9221733756501944]]],[[[106.15396246266596,-5.9216380478562689],[106.15396358900273,-5.9221807178467953],[106.15423457302714,-5.9221801538565684],[106.15423344642601,-5.9216374839180759],[106.15396246266596,-5.9216380478562689]]],[[[106.15504639754847,-5.9216357913094457],[106.15477541386726,-5.9216363556446643],[106.15477597741904,-5.9219076905632164],[106.15504696123246,-5.92190712620196],[106.15504639754847,-5.9216357913094457]]],[[[106.15884129741777,-5.9221705457724969],[106.15884016632265,-5.9216278767204766],[106.15856918300999,-5.9216284429084816],[106.15856974841219,-5.921899777461971],[106.15857031384076,-5.9221711120127427],[106.15884129741777,-5.9221705457724969]]],[[[106.15396246266596,-5.9216380478562689],[106.15396189953697,-5.9213667128569112],[106.15369091588285,-5.9213672766367482],[106.15369147887965,-5.921638611662118],[106.15396246266596,-5.9216380478562689]]],[[[106.15504639754847,-5.9216357913094457],[106.15531738120339,-5.9216352268418841],[106.15531681741356,-5.9213638919726765],[106.15504583389082,-5.921364456414195],[106.15504639754847,-5.9216357913094457]]],[[[106.15721426605138,-5.9216312718633786],[106.15721370133639,-5.9213599371766366],[106.15667173463291,-5.9213610677800412],[106.15640075124162,-5.9213616328832401],[106.15640131556012,-5.9216329676482182],[106.15721426605138,-5.9216312718633786]]],[[[106.15450386676642,-5.9213655849002258],[106.15450330339937,-5.921094249950257],[106.15423231992996,-5.921094813968744],[106.15423288316484,-5.9213661489447356],[106.15450386676642,-5.9213655849002258]]],[[[106.15504583389082,-5.921364456414195],[106.15504527025942,-5.9210931215162939],[106.15477428684254,-5.9210936857994403],[106.15477485034175,-5.9213650207233783],[106.15504583389082,-5.921364456414195]]],[[[106.15612976782407,-5.9213621978541022],[106.15612920366405,-5.9210908630604058],[106.15585822035234,-5.9210914278728719],[106.15585878438021,-5.9213627626926293],[106.15612976782407,-5.9213621978541022]]],[[[106.15639962268357,-5.9208189633452779],[106.15639905844402,-5.920547628572228],[106.15612807542294,-5.9205481934648914],[106.15612863953034,-5.9208195282640075],[106.15639962268357,-5.9208189633452779]]]]
          },
          "properties":{
            "OBJECTID":2,
            "Id":2,
            "gridcode":3,
            "Shape_Length":6840.0000000158325,
            "Shape_Area":61200.000000209548,
            "luasan":6.1224193726963927
          }
        },
        {
          "type": "Feature",
          "id": 4,
          "geometry": {
            "type": "MultiPolygon",
            "coordinates": [[[[106.15265431977464,-5.9441616718664712],[106.15238332486571,-5.9441622371671254],[106.1523838894048,-5.944433572095055],[106.15265488444639,-5.9444330067684179],[106.15265431977464,-5.9441616718664712]]],[[[106.15211232993057,-5.9441628023349304],[106.15211176555043,-5.9438914673782959],[106.15184077072178,-5.9438920323872795],[106.15184133496923,-5.9441633673698853],[106.15211232993057,-5.9441628023349304]]],[[[106.15265431977464,-5.9441616718664712],[106.15292531465735,-5.9441611064329667],[106.15292474987916,-5.9438897715542813],[106.15265375512914,-5.943890336961795],[106.15265431977464,-5.9441616718664712]]],[[[106.1515697758668,-5.94389259726342],[106.15156921177824,-5.9436212622521039],[106.15129821702978,-5.9436218269694425],[106.15129878098567,-5.9438931620067184],[106.1515697758668,-5.94389259726342]]],[[[106.15075622745427,-5.9436229560056058],[106.15075566378989,-5.9433516209137709],[106.15048466909553,-5.9433521852066571],[106.1504852326272,-5.9436235203244312],[106.15075622745427,-5.9436229560056058]]],[[[106.15265319050988,-5.9436190020543744],[106.15265262591684,-5.9433476671442929],[106.15238163140596,-5.9433482323669988],[106.15238219586629,-5.9436195673030632],[106.15265319050988,-5.9436190020543744]]],[[[106.15780151663229,-5.9433369026750338],[106.15780094954496,-5.9430655682570794],[106.15752995566621,-5.9430661359774684],[106.1575305226209,-5.9433374704215209],[106.15780151663229,-5.9433369026750338]]],[[[106.14912913238875,-5.9430836694285079],[106.1491285695727,-5.9428123341756827],[106.14885757498659,-5.9428128976197696],[106.14885813766999,-5.9430842328984976],[106.14912913238875,-5.9430836694285079]]],[[[106.14994211638802,-5.9430819782215831],[106.14994155317402,-5.9428106430465055],[106.14939956413262,-5.9428117705987766],[106.14940012708132,-5.9430831058256919],[106.14994211638802,-5.9430819782215831]]],[[[106.1523810669718,-5.9430768974282229],[106.15238050256389,-5.9428055624867193],[106.15210950829209,-5.9428061275246389],[106.15211007256733,-5.9430774624921199],[106.1523810669718,-5.9430768974282229]]],[[[106.15725839496548,-5.942795369092158],[106.15698740116673,-5.9427959365208114],[106.15698796782975,-5.9430672710197738],[106.15725896176117,-5.9430667035650329],[106.15725839496548,-5.942795369092158]]],[[[106.14777303425416,-5.9425438146828897],[106.1477735963808,-5.9428151500679158],[106.14858658037436,-5.9428134609310366],[106.14858601784977,-5.9425421256236666],[106.14777303425416,-5.9425438146828897]]],[[[106.14777303425416,-5.9425438146828897],[106.14777247215365,-5.9422724792952213],[106.14750147770216,-5.9422730420234604],[106.14750203967003,-5.9425443774370033],[106.14777303425416,-5.9425438146828897]]],[[[106.15210894404304,-5.9425347925544134],[106.15210837982023,-5.942263457581543],[106.15183738578749,-5.9422640224347028],[106.15183794987766,-5.9425353574335427],[106.15210894404304,-5.9425347925544134]]],[[[106.14723048322455,-5.9422736046188929],[106.14722992141544,-5.94200226917674],[106.14695892704441,-5.942002831613503],[106.14695948872087,-5.9422741670815169],[106.14723048322455,-5.9422736046188929]]],[[[106.15834123532349,-5.9422504293042966],[106.15779924844102,-5.9422515649868961],[106.15779868145908,-5.9419802305580784],[106.15752768811095,-5.94198079817407],[106.15752825496024,-5.9422521326289868],[106.15725726145314,-5.9422527001382726],[106.15725839496548,-5.942795369092158],[106.15752938873787,-5.9427948015306864],[106.15752882183588,-5.9425234670811582],[106.15779981544931,-5.9425228994129684],[106.15780038248396,-5.9427942338363966],[106.15807137620365,-5.9427936660092886],[106.15807080903637,-5.9425223316119657],[106.15834180259706,-5.942521763678152],[106.15834123532349,-5.9422504293042966]]],[[[106.15834123532349,-5.9422504293042966],[106.15888322210053,-5.9422492930904749],[106.15888265458807,-5.9419779587661141],[106.15834066807629,-5.9419790949276958],[106.15834123532349,-5.9422504293042966]]],[[[106.15888265458807,-5.9419779587661141],[106.15915364780437,-5.9419773904861257],[106.15915308018566,-5.9417060561851827],[106.15888208710199,-5.9417066244390426],[106.15888265458807,-5.9419779587661141]]],[[[106.1464163768388,-5.9417326205661967],[106.14641581547977,-5.9414612850410418],[106.14614482129568,-5.9414618470277141],[106.14614538252208,-5.9417331825787105],[106.1464163768388,-5.9417326205661967]]],[[[106.14858433043285,-5.941728119685429],[106.14858376801281,-5.941456784367233],[106.14831277403762,-5.9414573474162227],[106.14831333632503,-5.9417286827603091],[106.14858433043285,-5.941728119685429]]],[[[106.14912631857007,-5.9417269931372791],[106.1491257558848,-5.9414556578708853],[106.1488547619619,-5.9414562211854536],[106.14885532451456,-5.9417275564777512],[106.14912631857007,-5.9417269931372791]]],[[[106.15102327622608,-5.9417230460357082],[106.15102271261244,-5.9414517109508092],[106.15075171887275,-5.9414522751949024],[106.15075228235376,-5.941723610305746],[106.15102327622608,-5.9417230460357082]]],[[[106.15237824519457,-5.9417202226935935],[106.15237768091778,-5.9414488877385176],[106.15210668730916,-5.9414494526465536],[106.1521072514533,-5.941720787627605],[106.15237824519457,-5.9417202226935935]]],[[[106.15752712128798,-5.9417094637164434],[106.15752655449138,-5.9414381292560892],[106.15725556138217,-5.9414386966870945],[106.15725612804616,-5.9417100311735433],[106.15752712128798,-5.9417094637164434]]],[[[106.1450597229848,-5.9409214223298115],[106.14506028362857,-5.9411927579895201],[106.14533127778439,-5.9411921965598253],[106.14533071700799,-5.9409208609259361],[106.1450597229848,-5.9409214223298115]]],[[[106.1450597229848,-5.9409214223298115],[106.1450591623671,-5.9406500866673939],[106.14478816845045,-5.9406506479126788],[106.14478872893555,-5.9409219836009086],[106.1450597229848,-5.9409214223298115]]],[[[106.1605063405211,-5.9408892103971125],[106.16050577234489,-5.9406178762160646],[106.16023477992364,-5.9406184450292505],[106.16023534796727,-5.9408897792364579],[106.1605063405211,-5.9408892103971125]]],[[[106.14370419252336,-5.9406528915661019],[106.14370363259472,-5.9403815557719595],[106.14343263868044,-5.940382116327604],[106.1434331984765,-5.9406534521475285],[106.14370419252336,-5.9406528915661019]]],[[[106.15833726514673,-5.9403510886111413],[106.15833783223574,-5.9406224230040232],[106.15887981742135,-5.9406212871036459],[106.15887925006716,-5.940349952763003],[106.15833726514673,-5.9403510886111413]]],[[[106.14289065077384,-5.9403832370405931],[106.14289009126907,-5.9401119011664489],[106.14261909740929,-5.9401124612980327],[106.14261965678151,-5.9403837971979376],[106.14289065077384,-5.9403832370405931]]],[[[106.14641357030463,-5.940375942913394],[106.14641300907608,-5.9401046073747237],[106.14614201555503,-5.9401051692321838],[106.14614257665097,-5.9403765047966948],[106.14641357030463,-5.940375942913394]]],[[[106.16158917308555,-5.9403442655565701],[106.16158860443178,-5.9400729314748189],[106.16131761238142,-5.9400735007667071],[106.16131818090258,-5.9403448348746428],[106.16158917308555,-5.9403442655565701]]],[[[106.15887925006716,-5.940349952763003],[106.15915024248777,-5.9403493846397906],[106.15914967502735,-5.9400780503225992],[106.15914910759331,-5.9398067160026811],[106.15887811543786,-5.9398072840736349],[106.15887868273931,-5.9400786184196823],[106.15887925006716,-5.940349952763003]]],[[[106.14424393991989,-5.9395664270184678],[106.14288897233743,-5.9395692294099689],[106.14288953179022,-5.9398405652895798],[106.14343151916644,-5.9398394446796798],[106.1442445000356,-5.9398377627691739],[106.14424393991989,-5.9395664270184678]]],[[[106.14532847416316,-5.9398355183632789],[106.14532791351712,-5.9395641827158077],[106.1450569201569,-5.9395647439905934],[106.14505748067036,-5.9398360796638832],[106.14532847416316,-5.9398355183632789]]],[[[106.15833726514673,-5.9403510886111413],[106.1583366980841,-5.9400797542155805],[106.15833613104779,-5.9398084198172914],[106.15833556403787,-5.9395370854162604],[106.1580645719359,-5.9395376530628523],[106.15806570571694,-5.9400803219143929],[106.15806627264699,-5.9403516563360652],[106.15833726514673,-5.9403510886111413]]],[[[106.16077505997181,-5.9398033047892032],[106.16077449176866,-5.9395319706234453],[106.16050349990418,-5.9395325394647349],[106.16050406797473,-5.9398038736566585],[106.16077505997181,-5.9398033047892032]]],[[[106.16185902769584,-5.9398010279918845],[106.16185845896239,-5.9395296939308517],[106.16158746720362,-5.9395302633031148],[106.16158803580447,-5.9398015973903382],[106.16185902769584,-5.9398010279918845]]],[[[106.14424393991989,-5.9395664270184678],[106.14478592677062,-5.9395653051326329],[106.1447853664158,-5.9392939694308735],[106.14424337983021,-5.9392950912651035],[106.14424393991989,-5.9395664270184678]]],[[[106.15779187973135,-5.9387242172008312],[106.15779301308912,-5.9392668861207918],[106.15806400508491,-5.9392663186330497],[106.15806287146201,-5.9387236497652989],[106.15779187973135,-5.9387242172008312]]],[[[106.16050293186004,-5.9392612052701503],[106.16050179585099,-5.9387185368728357],[106.16023080435781,-5.9387191055029014],[106.16023194010172,-5.939261773952536],[106.16050293186004,-5.9392612052701503]]],[[[106.1610443470146,-5.9389887333622102],[106.16104377875817,-5.9387173992145286],[106.16077278731778,-5.9387179681100442],[106.16077335544165,-5.9389893022838995],[106.1610443470146,-5.9389887333622102]]],[[[106.14207375551551,-5.9384855653974133],[106.14180276237322,-5.9384861249762473],[106.14153176920499,-5.9384866844223563],[106.14153232789089,-5.938758020441556],[106.14180332119173,-5.9387574609697067],[106.14180388003622,-5.939028796960427],[106.14207487344366,-5.9390282373301035],[106.14207375551551,-5.9384855653974133]]],[[[106.16239873556351,-5.9387145527460623],[106.16239816667073,-5.9384432187265865],[106.16212717549514,-5.9384437882595282],[106.16212774425534,-5.9387151223052062],[106.16239873556351,-5.9387145527460623]]],[[[106.14288617546367,-5.9382125499714817],[106.14234418957417,-5.9382136697412475],[106.14234474863179,-5.9384850056858554],[106.14288673478639,-5.9384838858645681],[106.14288617546367,-5.9382125499714817]]],[[[106.15779187973135,-5.9387242172008312],[106.15779074647899,-5.9381815482700144],[106.15751975498709,-5.9381821155206236],[106.15752088797436,-5.9387247845036386],[106.15779187973135,-5.9387242172008312]]],[[[106.14288617546367,-5.9382125499714817],[106.14342816124906,-5.9382114296708446],[106.14342760168726,-5.9379400938265592],[106.14288561616694,-5.9379412140756518],[106.14288617546367,-5.9382125499714817]]],[[[106.14207319659045,-5.9382142294270555],[106.14207263769137,-5.9379428934539558],[106.14207207881827,-5.9376715574781489],[106.14180108607364,-5.9376721169797495],[106.1418022035807,-5.9382147889801447],[106.14207319659045,-5.9382142294270555]]],[[[106.15806117122534,-5.937909646443325],[106.15806060453251,-5.9376383119972465],[106.15778961333204,-5.9376388793283601],[106.15779017989233,-5.9379102138005422],[106.15806117122534,-5.937909646443325]]],[[[106.16321000153741,-5.9378988414417577],[106.16320943232638,-5.93762750749283],[106.16293844162779,-5.9376280773452654],[106.16293901070625,-5.9378994113204149],[106.16321000153741,-5.9378988414417577]]],[[[106.16429339485607,-5.937625226756083],[106.16429282514142,-5.9373538929093721],[106.16402183468124,-5.937354463266364],[106.16402240426336,-5.9376257971393196],[106.16429339485607,-5.937625226756083]]],[[[106.14288393843287,-5.9371272063719172],[106.14261294603125,-5.9371277662201081],[106.14261350511741,-5.9373991021498069],[106.14261406422958,-5.9376704380768315],[106.14288505689622,-5.9376698781771156],[106.14288393843287,-5.9371272063719172]]],[[[106.14342760168726,-5.9379400938265592],[106.14369859440839,-5.9379395335029459],[106.14369635589131,-5.9368541902018501],[106.14342536370026,-5.9368547504223388],[106.14342592315798,-5.9371260862774555],[106.14315493080844,-5.9371266463910324],[106.14315604953687,-5.9376693181446933],[106.14342704215147,-5.9376687579795666],[106.14342760168726,-5.9379400938265592]]],[[[106.16483423602899,-5.9370814180004272],[106.1648336661023,-5.9368100842008227],[106.16456267596018,-5.9368106547706896],[106.16456324575437,-5.9370819885965505],[106.16483423602899,-5.9370814180004272]]],[[[106.16673116720871,-5.9370774201123062],[106.1667305963544,-5.9368060864966736],[106.16645960639801,-5.9368066579953105],[106.16646017711979,-5.9370779916372438],[106.16673116720871,-5.9370774201123062]]],[[[106.14369635589131,-5.9368541902018501],[106.14396734805626,-5.9368536298486738],[106.14396678835959,-5.9365822940423669],[106.14369579632708,-5.9365828543697559],[106.14369635589131,-5.9368541902018501]]],[[[106.14396678835959,-5.9365822940423669],[106.14450877234636,-5.9365811729895483],[106.14450821241066,-5.9363098372322103],[106.14423722056277,-5.9363103977991614],[106.1439662286889,-5.9363109582334372],[106.14396678835959,-5.9365822940423669]]],[[[106.1602256948173,-5.9362770973453243],[106.15995470449045,-5.9362776656072826],[106.15995527197906,-5.9365489998839687],[106.1602262624384,-5.9365484315958561],[106.1602256948173,-5.9362770973453243]]],[[[106.16754299483898,-5.9365330376652166],[106.16754242364027,-5.9362617041231349],[106.16727143402858,-5.9362622759671799],[106.16727200509477,-5.9365336095355801],[106.16754299483898,-5.9365330376652166]]],[[[106.1602256948173,-5.9362770973453243],[106.16049668511775,-5.936276528950696],[106.16049611739055,-5.9360051947235979],[106.16022512722262,-5.9360057630920666],[106.1602256948173,-5.9362770973453243]]],[[[106.14315493080844,-5.9371266463910324],[106.14315381218408,-5.9365839746264912],[106.14342480426858,-5.9365834145644651],[106.14342424486291,-5.936312078703966],[106.14342368548328,-5.9360407428407438],[106.14315269366379,-5.9360413028512209],[106.14315213444269,-5.9357699669595005],[106.14288114272964,-5.9357705268115408],[106.14288170181825,-5.9360418627290299],[106.14288226093291,-5.9363131986437967],[106.14288282007352,-5.9365845345558386],[106.14288393843287,-5.9371272063719172],[106.14315493080844,-5.9371266463910324]]],[[[106.14396510942561,-5.935768286607404],[106.14396566904422,-5.9360396224217826],[106.14423666078564,-5.9360390620133003],[106.14423610103455,-5.9357677262247144],[106.14396510942561,-5.935768286607404]]],[[[106.16808383134685,-5.9359892265448853],[106.1680832599363,-5.9357178930500067],[106.16781227064277,-5.935718465106727],[106.16781284192082,-5.9359897986279373],[106.16808383134685,-5.9359892265448853]]],[[[106.14396510942561,-5.935768286607404],[106.14396454983304,-5.9354969507902853],[106.14342256680207,-5.9354980711061094],[106.14342312612966,-5.9357694069747975],[106.14396510942561,-5.935768286607404]]],[[[106.16889622765748,-5.9357161760839015],[106.16889565587606,-5.9354448426653077],[106.16862466679474,-5.9354454150936506],[106.16862523844368,-5.9357167485385931],[106.16889622765748,-5.9357161760839015]]],[[[106.14288114272964,-5.9357705268115408],[106.14288058366702,-5.93549919089131],[106.14315157524759,-5.9354986310650384],[106.14315101607849,-5.9352272951679366],[106.14260903315635,-5.9352284146362928],[106.14260959206047,-5.935499750584925],[106.14261015099059,-5.9357710865309183],[106.14288114272964,-5.9357705268115408]]],[[[106.16537222571364,-5.9351809401237183],[106.16537165570759,-5.9349096063576825],[106.16510066654592,-5.9349101770090265],[106.16510123641952,-5.9351815108013319],[106.16537222571364,-5.9351809401237183]]],[[[106.16645447109657,-5.9343646550959619],[106.16645390064028,-5.9340933214269729],[106.16591192329747,-5.9340944635003892],[106.16591249348889,-5.9343657972219601],[106.16645447109657,-5.9343646550959619]]],[[[106.16726572482771,-5.9335489401338588],[106.16726515405374,-5.9332776065356105],[106.16699416587257,-5.9332781779575541],[106.16699473651414,-5.9335495115821137],[106.16726572482771,-5.9335489401338588]]],[[[106.14043552341337,-5.9325195255093508],[106.14043608099804,-5.9327908616909921],[106.14070707148791,-5.932790303315767],[106.14070651377081,-5.9325189671598384],[106.14043552341337,-5.9325195255093508]]],[[[106.14043552341337,-5.9325195255093508],[106.14043496585467,-5.9322481893250556],[106.14016397560368,-5.9322487475162706],[106.14016453302999,-5.932520083726275],[106.14043552341337,-5.9325195255093508]]],[[[106.14016341820333,-5.9319774113035617],[106.14016286082894,-5.9317060750881323],[106.13989187081684,-5.9317066330953612],[106.13989242805886,-5.9319779693364927],[106.14016341820333,-5.9319774113035617]]],[[[106.16753271732787,-5.931649033492735],[106.16753328807485,-5.9319203670808953],[106.16780427554079,-5.931919795525368],[106.1678037046614,-5.9316484619635323],[106.16753271732787,-5.931649033492735]]],[[[106.14016230348048,-5.9314347388699629],[106.14016174615797,-5.9311634026491564],[106.14016118886141,-5.9308920664256108],[106.13989019924651,-5.9308926243557369],[106.13989131360078,-5.9314352968514914],[106.14016230348048,-5.9314347388699629]]],[[[106.16753271732787,-5.931649033492735],[106.16753157591364,-5.931106366308291],[106.16726058881832,-5.9311069376522934],[106.16725944777514,-5.9305642704043855],[106.16698846091803,-5.9305648415632115],[106.16698789056865,-5.9302935079088686],[106.1667169038173,-5.9302940789088483],[106.16671804427789,-5.9308367462674214],[106.16698903129395,-5.9308361752148304],[106.16698960169647,-5.9311075088637422],[106.166447627373,-5.9311086508889819],[106.16645047845992,-5.9324653193559236],[106.16672146629695,-5.9324647482780835],[106.16672260718235,-5.9330074155933552],[106.16699359525762,-5.9330068443303192],[106.16699188357204,-5.9321928434323006],[106.1672628712235,-5.9321922721156053],[106.16726172996779,-5.9316496048893725],[106.16753271732787,-5.931649033492735]]],[[[106.16617322053744,-5.9294812192953064],[106.16590223410354,-5.9294817898188201],[106.16590394340406,-5.9302957911135756],[106.16617493023506,-5.9302952205112023],[106.16617436030928,-5.9300238867752881],[106.16644534698133,-5.9300233160666718],[106.16644477694979,-5.9297519823543281],[106.1661737904101,-5.9297525530366499],[106.16617322053744,-5.9294812192953064]]],[[[106.13960696146832,-5.9249237834205655],[106.13960640503306,-5.9246524470834494],[106.13933541840944,-5.9246530041576309],[106.13933597471245,-5.9249243405204357],[106.13960696146832,-5.9249237834205655]]],[[[106.1393315250144,-5.9227536495423632],[106.13960251071248,-5.9227530926479997],[106.13960195448472,-5.9224817562892742],[106.13905998332703,-5.9224828698942611],[106.13906109527973,-5.9230255427117529],[106.1390622073361,-5.9235682155184408],[106.13906387561508,-5.9243822247081788],[106.13960584862375,-5.9243811107435986],[106.13960473588294,-5.9238384380558937],[106.13933374965599,-5.9238389950530106],[106.1393315250144,-5.9227536495423632]]],[[[106.15504752494266,-5.9221784610917574],[106.15504808867921,-5.9224497959788858],[106.15531907273065,-5.9224492314331965],[106.15531850886194,-5.9221778965721121],[106.15504752494266,-5.9221784610917574]]],[[[106.15721596035441,-5.9224452759072923],[106.1572153955604,-5.9221739412286736],[106.15694441182528,-5.9221745066747982],[106.15694497648711,-5.9224458413795027],[106.15721596035441,-5.9224452759072923]]],[[[106.15504752494266,-5.9221784610917574],[106.15504696123246,-5.92190712620196],[106.15477597741904,-5.9219076905632164],[106.15477654099712,-5.9221790254790481],[106.15504752494266,-5.9221784610917574]]],[[[106.15558892878033,-5.9219059970824066],[106.15558949275493,-5.9221773319201114],[106.15559005675581,-5.922448666755149],[106.1558610407547,-5.9224481019447399],[106.15585991251486,-5.921905432324106],[106.15558892878033,-5.9219059970824066]]],[[[106.15802834660767,-5.9221722440961759],[106.15829933023737,-5.9221716781206357],[106.15829876494099,-5.9219003435437498],[106.15802778144351,-5.9219009094931803],[106.15802834660767,-5.9221722440961759]]],[[[106.15477597741904,-5.9219076905632164],[106.15477541386726,-5.9216363556446643],[106.15450443015975,-5.9216369198475425],[106.15450499357937,-5.9219082547921236],[106.15477597741904,-5.9219076905632164]]],[[[106.15802834660767,-5.9221722440961759],[106.15775736295159,-5.9221728099393625],[106.15775623291387,-5.9216301406784444],[106.15748524949579,-5.9216307063370826],[106.15748581436929,-5.9219020409949987],[106.15748637926917,-5.9221733756501944],[106.15748694419536,-5.922444710302722],[106.15802891179825,-5.9224435786965035],[106.15802834660767,-5.9221722440961759]]],[[[106.15829876494099,-5.9219003435437498],[106.15856974841219,-5.921899777461971],[106.15856918300999,-5.9216284429084816],[106.15829819967095,-5.9216290089641443],[106.15829876494099,-5.9219003435437498]]],[[[106.15748524949579,-5.9216307063370826],[106.15748468464864,-5.9213593716764317],[106.15721370133639,-5.9213599371766366],[106.15721426605138,-5.9216312718633786],[106.15748524949579,-5.9216307063370826]]],[[[106.15883960081464,-5.9213565421903729],[106.15883903533302,-5.9210852076576161],[106.15856805228469,-5.9210857737933784],[106.15856861763415,-5.9213571083522547],[106.15883960081464,-5.9213565421903729]]],[[[106.15667117020851,-5.9210897330384835],[106.15640018694944,-5.9210902981156099],[106.15639962268357,-5.9208189633452779],[106.15612863953034,-5.9208195282640075],[106.15558667314492,-5.9208206577044962],[106.15558723701433,-5.9210919925530083],[106.15531625365004,-5.9210925571008159],[106.15531568991278,-5.9208212222262544],[106.15504470665434,-5.92082178661569],[106.1547737233696,-5.9208223508728004],[106.15477428684254,-5.9210936857994403],[106.15504527025942,-5.9210931215162939],[106.15504583389082,-5.921364456414195],[106.15531681741356,-5.9213638919726765],[106.15531738120339,-5.9216352268418841],[106.15504639754847,-5.9216357913094457],[106.15504696123246,-5.92190712620196],[106.15558892878033,-5.9219059970824066],[106.15558780091003,-5.9213633273988213],[106.15585878438021,-5.9213627626926293],[106.15585822035234,-5.9210914278728719],[106.15612920366405,-5.9210908630604058],[106.15612976782407,-5.9213621978541022],[106.15640075124162,-5.9213616328832401],[106.15667173463291,-5.9213610677800412],[106.15667117020851,-5.9210897330384835]]],[[[106.15667117020851,-5.9210897330384835],[106.15775510298155,-5.9210874714066852],[106.15775453805492,-5.9208161367667769],[106.15667060581055,-5.9208183982942257],[106.15667117020851,-5.9210897330384835]]],[[[106.15829706920998,-5.9210863397968101],[106.15829650401905,-5.9208150052091142],[106.15802552105016,-5.9208155710541073],[106.15802608610898,-5.9210869056679112],[106.15829706920998,-5.9210863397968101]]],[[[106.15423288316484,-5.9213661489447356],[106.15423231992996,-5.921094813968744],[106.15450330339937,-5.921094249950257],[106.15450217674407,-5.9205515800422006],[106.15477315992297,-5.9205510159434427],[106.15477259650255,-5.9202796810113512],[106.1539596472836,-5.9202813728325969],[106.15396021030755,-5.920552707842762],[106.15368922704987,-5.9205532715445646],[106.15369091588285,-5.9213672766367482],[106.15396189953697,-5.9213667128569112],[106.15396246266596,-5.9216380478562689],[106.15423344642601,-5.9216374839180759],[106.15423288316484,-5.9213661489447356]]]]
          },
          "properties":{
            "OBJECTID":4,
            "Id":4,
            "gridcode":4,
            "Shape_Length":16619.999999969266,
            "Shape_Area":179999.99999856111,
            "luasan":18.007136208301528
          }
        },
        {
          "type": "Feature",
          "id": 12,
          "geometry": {
            "type": "MultiPolygon",
            "coordinates": [[[[106.15184133496923,-5.9441633673698853],[106.15184077072178,-5.9438920323872795],[106.1515697758668,-5.94389259726342],[106.15157033998159,-5.9441639322719917],[106.15184133496923,-5.9441633673698853]]],[[[106.15129878098567,-5.9438931620067184],[106.15129821702978,-5.9436218269694425],[106.15102722225512,-5.9436223915539426],[106.15102778607837,-5.943893726617171],[106.15129878098567,-5.9438931620067184]]],[[[106.1580719433973,-5.943065000403867],[106.15807137620365,-5.9427936660092886],[106.15780038248396,-5.9427942338363966],[106.15780094954496,-5.9430655682570794],[106.1580719433973,-5.943065000403867]]],[[[106.1466879326472,-5.9420033939174637],[106.14668737112945,-5.9417320584208859],[106.1464163768388,-5.9417326205661967],[106.14641693822391,-5.9420039560886231],[106.1466879326472,-5.9420033939174637]]],[[[106.1594246409943,-5.9419768220733369],[106.15942407324296,-5.9417054877985311],[106.15915308018566,-5.9417060561851827],[106.15915364780437,-5.9419773904861257],[106.1594246409943,-5.9419768220733369]]],[[[106.14506028362857,-5.9411927579895201],[106.1450597229848,-5.9409214223298115],[106.14478872893555,-5.9409219836009086],[106.14478928944671,-5.9411933192864295],[106.14506028362857,-5.9411927579895201]]],[[[106.14397574663147,-5.9409236666175342],[106.1439751865442,-5.940652330851905],[106.14370419252336,-5.9406528915661019],[106.14370475247802,-5.9409242273575185],[106.14397574663147,-5.9409236666175342]]],[[[106.1613193180242,-5.9408875030824335],[106.16131874945017,-5.9406161689799033],[106.16077676473974,-5.9406173072701129],[106.16077733304854,-5.9408886414249951],[106.1613193180242,-5.9408875030824335]]],[[[106.14234810352353,-5.9401130212968543],[106.14234754430993,-5.9398416853684655],[106.1420765505308,-5.9398422452087756],[106.14207710961183,-5.9401135811629162],[106.14234810352353,-5.9401130212968543]]],[[[106.16212888185515,-5.9392577903883472],[106.16212831304206,-5.9389864563481405],[106.16185732157483,-5.9389870258007544],[106.16185789025542,-5.939258359867158],[106.16212888185515,-5.9392577903883472]]],[[[106.16293957981121,-5.9381707452928527],[106.16293901070625,-5.9378994113204149],[106.16266801984862,-5.9378999810663631],[106.16266858882103,-5.9381713150650173],[106.16293957981121,-5.9381707452928527]]],[[[106.14261406422958,-5.9376704380768315],[106.14261350511741,-5.9373991021498069],[106.14207151997118,-5.9374002214996171],[106.14207207881827,-5.9376715574781489],[106.14261406422958,-5.9376704380768315]]],[[[106.16537621649873,-5.9370802764101169],[106.165375646307,-5.9368089426630455],[106.16510465621791,-5.9368095134982752],[106.16510522627713,-5.9370808472716154],[106.16537621649873,-5.9370802764101169]]],[[[106.16808440278398,-5.9362605600370388],[106.16808383134685,-5.9359892265448853],[106.16781284192082,-5.9359897986279373],[106.16781341322542,-5.9362611321464227],[106.16808440278398,-5.9362605600370388]]],[[[106.14261015099059,-5.9357710865309183],[106.14260959206047,-5.935499750584925],[106.14233860042791,-5.9355003101458843],[106.14233915922554,-5.935771646117634],[106.14261015099059,-5.9357710865309183]]],[[[106.13906610034998,-5.9254675702567177],[106.13906554412736,-5.9251962338736535],[106.13879455718742,-5.9251967907343612],[106.13879511327775,-5.9254681271431036],[106.13906610034998,-5.9254675702567177]]],[[[106.15640131556012,-5.9216329676482182],[106.15640075124162,-5.9213616328832401],[106.15612976782407,-5.9213621978541022],[106.15613033201041,-5.9216335326451475],[106.15640131556012,-5.9216329676482182]]],[[[106.15911114960892,-5.9216273104001313],[106.15911058396875,-5.921355975896156],[106.15883960081464,-5.9213565421903729],[106.15884016632265,-5.9216278767204766],[106.15911114960892,-5.9216273104001313]]],[[[106.15450443015975,-5.9216369198475425],[106.15477541386726,-5.9216363556446643],[106.15477485034175,-5.9213650207233783],[106.15477428684254,-5.9210936857994403],[106.15450330339937,-5.921094249950257],[106.15450386676642,-5.9213655849002258],[106.15423288316484,-5.9213661489447356],[106.15423344642601,-5.9216374839180759],[106.15450443015975,-5.9216369198475425]]]]
          },
          "properties":{
            "OBJECTID":12,
            "Id":12,
            "gridcode":2,
            "Shape_Length":2520.0000000186265,
            "Shape_Area":20700.000000474975,
            "luasan":2.0708213261153596
          }
        },
        {
          "type": "Feature",
          "id": 33,
          "geometry": {
            "type": "MultiPolygon",
            "coordinates": [[[[106.15753108960193,-5.9436088048628628],[106.1575305226209,-5.9433374704215209],[106.15725952858318,-5.9433380380351792],[106.15726009543155,-5.943609372502614],[106.15753108960193,-5.9436088048628628]]],[[[106.15915421544949,-5.9422487247843563],[106.15915364780437,-5.9419773904861257],[106.15888265458807,-5.9419779587661141],[106.15888322210053,-5.9422492930904749],[106.15915421544949,-5.9422487247843563]]],[[[106.16050690872372,-5.9411605445754496],[106.1605063405211,-5.9408892103971125],[106.16023534796727,-5.9408897792364579],[106.16023591603727,-5.9411611134409537],[106.16050690872372,-5.9411605445754496]]],[[[106.16159031047235,-5.9408869337119921],[106.16158974176572,-5.9406155996356453],[106.16131874945017,-5.9406161689799033],[106.1613193180242,-5.9408875030824335],[106.16159031047235,-5.9408869337119921]]],[[[106.16510579636285,-5.9373521810422307],[106.16510522627713,-5.9370808472716154],[106.16483423602899,-5.9370814180004272],[106.1648348059822,-5.937352751797305],[106.16510579636285,-5.9373521810422307]]],[[[106.16754356606425,-5.9368043712046727],[106.16754299483898,-5.9365330376652166],[106.16727200509477,-5.9365336095355801],[106.16727257618756,-5.9368049431013548],[106.16754356606425,-5.9368043712046727]]],[[[106.15613258901885,-5.9227188717821742],[106.15613202472728,-5.9224475370019709],[106.1558610407547,-5.9224481019447399],[106.15586160491409,-5.9227194367510041],[106.15613258901885,-5.9227188717821742]]]]
          },
          "properties":{
            "OBJECTID":33,
            "Id":33,
            "gridcode":1,
            "Shape_Length":839.99999999068677,
            "Shape_Area":6299.9999998603016,
            "luasan":0.63024653721040036
          }
        },
        {
          "type": "Feature",
          "id": 40,
          "geometry": {
            "type": "MultiPolygon",
            "coordinates": [[[[106.15048410559001,-5.9430808500861696],[106.15048354211069,-5.9428095149629554],[106.15021254765544,-5.9428100790711396],[106.15021311100213,-5.9430814142202886],[106.15048410559001,-5.9430808500861696]]],[[[106.15048410559001,-5.9430808500861696],[106.15048466909553,-5.9433521852066571],[106.15075566378989,-5.9433516209137709],[106.15129765310007,-5.9433504919295057],[106.15129821702978,-5.9436218269694425],[106.15156921177824,-5.9436212622521039],[106.15184020650049,-5.9436206974019274],[106.15184077072178,-5.9438920323872795],[106.15211176555043,-5.9438914673782959],[106.15238276035289,-5.9438909022364674],[106.15238219586629,-5.9436195673030632],[106.1521112011965,-5.9436201324189142],[106.15211063686881,-5.9433487974568724],[106.15211007256733,-5.9430774624921199],[106.15183907813663,-5.9430780274231916],[106.15183851399404,-5.9428066924297394],[106.15102553094263,-5.9428083863481271],[106.15102609468725,-5.9430797214194548],[106.15048410559001,-5.9430808500861696]]],[[[106.15021254765544,-5.9428100790711396],[106.15021142104065,-5.9422674087647103],[106.1499404268245,-5.942267972688219],[106.14993986368901,-5.9419966375050102],[106.14966886957933,-5.9419972012697908],[106.14966943258217,-5.9422685364789221],[106.14858545535131,-5.9422707903136534],[106.14858489287901,-5.9419994550008965],[106.14777191007927,-5.9420011439048075],[106.14777134803099,-5.9417298085116839],[106.14722935963242,-5.9417309337318773],[106.14722992141544,-5.94200226917674],[106.14723048322455,-5.9422736046188929],[106.14750147770216,-5.9422730420234604],[106.14777247215365,-5.9422724792952213],[106.14777303425416,-5.9425438146828897],[106.14858601784977,-5.9425421256236666],[106.14885701232937,-5.9425415623382971],[106.14885757498659,-5.9428128976197696],[106.1491285695727,-5.9428123341756827],[106.14939956413262,-5.9428117705987766],[106.14994155317402,-5.9428106430465055],[106.15021254765544,-5.9428100790711396]]],[[[106.14560171100511,-5.9409202993892816],[106.1456022719141,-5.9411916349973479],[106.14587326601777,-5.941191073302087],[106.14614426009537,-5.9411905114740406],[106.14614482129568,-5.9414618470277141],[106.14641581547977,-5.9414612850410418],[106.14668680963781,-5.9414607229215797],[106.14668624817227,-5.9411893874195982],[106.14641525414685,-5.9411899495132117],[106.14641469284004,-5.9409186139826531],[106.14614369892115,-5.9409191759176414],[106.14614313777302,-5.9406478403585323],[106.14587214396067,-5.9406484021349044],[106.14587270497618,-5.9409197377198506],[106.14560171100511,-5.9409202993892816]]],[[[106.14560171100511,-5.9409202993892816],[106.14560058926536,-5.9403776281650034],[106.14532959553344,-5.9403781896500085],[106.14532903483526,-5.9401068540080075],[106.14505804120988,-5.9401074153344302],[106.14505860177546,-5.9403787510022488],[106.1445166141813,-5.940379873308431],[106.14451605388091,-5.9401085375889933],[106.14343207891044,-5.9401107805050053],[106.14343263868044,-5.940382116327604],[106.14370363259472,-5.9403815557719595],[106.14424562034515,-5.9403804342623729],[106.14424618053897,-5.9406517700049353],[106.14451717450773,-5.9406512090251935],[106.14478816845045,-5.9406506479126788],[106.1450591623671,-5.9406500866673939],[106.1450597229848,-5.9409214223298115],[106.14533071700799,-5.9409208609259361],[106.14560171100511,-5.9409202993892816]]],[[[106.14343207891044,-5.9401107805050053],[106.14343151916644,-5.9398394446796798],[106.14288953179022,-5.9398405652895798],[106.14289009126907,-5.9401119011664489],[106.14343207891044,-5.9401107805050053]]],[[[106.16077221922032,-5.9384466339334452],[106.16077165114929,-5.9381752997542039],[106.16050065994759,-5.9381758684646631],[106.16050122788609,-5.9384472026700701],[106.16077221922032,-5.9384466339334452]]],[[[106.14369579632708,-5.9365828543697559],[106.14369523678891,-5.9363115185350388],[106.14342424486291,-5.936312078703966],[106.14342480426858,-5.9365834145644651],[106.14369579632708,-5.9365828543697559]]],[[[106.16807754729304,-5.933004557952219],[106.16780655932409,-5.9330051297456379],[106.16780884353257,-5.9340904639225771],[106.16753785500725,-5.9340910356886969],[106.16753899700606,-5.9346337028135645],[106.16726800818927,-5.9346342744996994],[106.1672685790961,-5.9349056080843887],[106.16618462303333,-5.9349078936078179],[106.16618576386686,-5.9354505609794579],[106.16510180631963,-5.9354528445908956],[106.16510237624624,-5.9357241783778161],[106.16428940740992,-5.9357258897723275],[106.16429054654776,-5.9362685574955014],[106.16401955661765,-5.9362691277475141],[106.16402069559646,-5.9368117955123756],[106.16347871512676,-5.9368129357233332],[106.16347814588914,-5.9365416017897434],[106.16320715574706,-5.9365421716699727],[106.16320658666841,-5.9362708377075313],[106.16266460656989,-5.9362719770175261],[106.16266517538351,-5.936543311032402],[106.16212319491412,-5.9365444498641269],[106.16212376348919,-5.9368157839287905],[106.16185277308233,-5.9368163531718343],[106.16185220463974,-5.9365450190809756],[106.16131022401169,-5.9365461571166422],[106.16131079218923,-5.936817491259875],[106.16158178264898,-5.9368169222821958],[106.16158291934839,-5.9373595905080476],[106.16185391004677,-5.9373590213453058],[106.16185504711702,-5.9379016895079717],[106.16158405615357,-5.9379022587230947],[106.16158462459582,-5.9381735928265451],[106.16131363347344,-5.9381741619351454],[106.16131420180956,-5.9384454960620356],[106.1615851930645,-5.9384449269272528],[106.16158633008118,-5.9389875951206381],[106.16131533856112,-5.9389881643077906],[106.16131590697654,-5.9392594984265683],[106.16104491529748,-5.9392600675071661],[106.16104548360676,-5.939531401649413],[106.16077449176866,-5.9395319706234453],[106.16077505997181,-5.9398033047892032],[106.16050406797473,-5.9398038736566585],[106.16023307595127,-5.9398044423913632],[106.16023250801329,-5.9395331081732792],[106.15996151609598,-5.9395336767490807],[106.15996094831698,-5.9392623425021824],[106.15968995650582,-5.9392629109190924],[106.15969052415225,-5.9395342451921369],[106.15941953218216,-5.9395348135024504],[106.15941839718083,-5.9389921449013681],[106.15860542190761,-5.9389938488790657],[106.15860598899741,-5.9392651832593497],[106.15887698091406,-5.9392646153733928],[106.15887754816276,-5.9395359497248439],[106.15914854018565,-5.9395353816800185],[106.15914910759331,-5.9398067160026811],[106.15942009972238,-5.9398061477989774],[106.159420667289,-5.94007748209276],[106.15914967502735,-5.9400780503225992],[106.15915024248777,-5.9403493846397906],[106.15915137748779,-5.94089205326609],[106.15888038480193,-5.940892621441562],[106.1588809522089,-5.9411639557767657],[106.15779698067141,-5.9411662272553594],[106.15779811450351,-5.9417088961265501],[106.15779868145908,-5.9419802305580784],[106.15834066807629,-5.9419790949276958],[106.15888265458807,-5.9419779587661141],[106.15888208710199,-5.9417066244390426],[106.15915308018566,-5.9417060561851827],[106.15915251259331,-5.9414347218815129],[106.15942350551799,-5.941434153520996],[106.15942293781941,-5.9411628192407839],[106.15969393058509,-5.9411622507736208],[106.15969336278029,-5.9408909165168238],[106.15996435538698,-5.9408903479430286],[106.15996378747597,-5.9406190137096671],[106.16023477992364,-5.9406184450292505],[106.16050577234489,-5.9406178762160646],[106.16050463607171,-5.9400752078458376],[106.16077562820136,-5.9400746389522165],[106.16077619645733,-5.940345973112505],[106.16131818090258,-5.9403448348746428],[106.16131761238142,-5.9400735007667071],[106.16131704388671,-5.9398021666560439],[106.16158803580447,-5.9398015973903382],[106.16158746720362,-5.9395302633031148],[106.16158689862917,-5.9392589292132314],[106.16185789025542,-5.939258359867158],[106.16185732157483,-5.9389870258007544],[106.16185675292071,-5.9387156917316242],[106.16212774425534,-5.9387151223052062],[106.16212717549514,-5.9384437882595282],[106.16212660676133,-5.9381724542112071],[106.1623975978044,-5.9381718847044684],[106.16239702896453,-5.9379005506796059],[106.16266801984862,-5.9378999810663631],[106.16266745090267,-5.9376286470650008],[106.16293844162779,-5.9376280773452654],[106.16320943232638,-5.93762750749283],[106.16320886314185,-5.9373561735411755],[106.16402183468124,-5.937354463266364],[106.16402126512563,-5.9370831293907322],[106.16429225545325,-5.9370825590599852],[106.16429168579158,-5.9368112252078724],[106.16456267596018,-5.9368106547706896],[106.16456153645134,-5.9362679871108197],[106.16537450600313,-5.9362662751607562],[106.1653750761418,-5.9365376089132136],[106.16564606607182,-5.9365370379715783],[106.16591705597536,-5.9365364668972669],[106.16591762640557,-5.9368078005945417],[106.16645960639801,-5.9368066579953105],[106.1667305963544,-5.9368060864966736],[106.16700158628426,-5.9368055148653553],[106.16700101532402,-5.9365341812732684],[106.16727200509477,-5.9365336095355801],[106.16727143402858,-5.9362622759671799],[106.16754242364027,-5.9362617041231349],[106.16754185246813,-5.9359903705783275],[106.16781284192082,-5.9359897986279373],[106.16781227064277,-5.935718465106727],[106.1680832599363,-5.9357178930500067],[106.16808268855236,-5.9354465595523838],[106.16781169939125,-5.9354471315827748],[106.16781112816636,-5.9351757980561803],[106.16781055696809,-5.9349044645268432],[106.16808154586418,-5.9349038925491113],[106.16808211719497,-5.9351752260521193],[106.168353106197,-5.9351746539154133],[106.16835367768685,-5.9354459873893424],[106.16862466679474,-5.9354454150936506],[106.16862352357667,-5.9349027481957366],[106.16889451239305,-5.9349021758200911],[106.16889394069145,-5.9346308423934024],[106.16862295200754,-5.9346314147426993],[106.16862238046501,-5.9343600812869202],[106.16862123745972,-5.9338174143673363],[106.16835024914661,-5.9338179865049723],[106.16834967781631,-5.9335466530147585],[106.16834910651261,-5.9332753195218189],[106.16807811843775,-5.9332758914741692],[106.16807754729304,-5.933004557952219]]],[[[106.16617322053744,-5.9294812192953064],[106.16617265069132,-5.9292098855512396],[106.16590166438979,-5.9292104560484651],[106.16590223410354,-5.9294817898188201],[106.16617322053744,-5.9294812192953064]]]]
          },
          "properties":{
            "OBJECTID":40,
            "Id":40,
            "gridcode":6,
            "Shape_Length":8999.9999999534339,
            "Shape_Area":224999.99999907799,
            "luasan":22.508820456689065
          }
        }
      ]
    };

    // ==================== TOGGLE CONTROLS ====================
    // Toggle Panel Kanan
    document.getElementById('togglePanelBtn').addEventListener('click', function() {
        const rightPanel = document.getElementById('rightPanel');
        rightPanel.style.display = rightPanel.style.display === 'none' ? 'block' : 'none';
    });

    // Toggle Statistics Panel
    document.getElementById('statsToggle').addEventListener('click', function() {
        const statsPanel = document.getElementById('statsPanel');
        statsPanel.style.display = statsPanel.style.display === 'none' ? 'block' : 'none';
    });

    // Close Statistics Panel
    document.getElementById('statsClose').addEventListener('click', function() {
        document.getElementById('statsPanel').style.display = 'none';
    });

    // Collapsible Sections
    document.querySelectorAll('.collapsible-header').forEach(header => {
        header.addEventListener('click', function() {
            const collapsible = this.parentElement;
            collapsible.classList.toggle('hidden');
            const arrow = this.querySelector('span:last-child');
            arrow.textContent = collapsible.classList.contains('hidden') ? '‚ñ∂' : '‚ñº';
        });
    });

    // Toggle Basemap Panel
    document.getElementById('basemapFlipBtn').addEventListener('click', function() {
        const basemapCard = document.getElementById('basemapCard');
        basemapCard.classList.toggle('hidden');
    });

    // Tutup Panel Kanan
    document.getElementById('closePanel').addEventListener('click', function() {
        document.getElementById('rightPanel').style.display = 'none';
    });

    // Pilih Basemap
    document.querySelectorAll('.basemap-item').forEach(item => {
        item.addEventListener('click', function() {
            const basemap = this.getAttribute('data-basemap');
            
            document.querySelectorAll('.basemap-item').forEach(el => {
                el.classList.remove('active');
            });
            
            this.classList.add('active');
            
            if (basemaps[currentBasemap]) {
                map.removeLayer(basemaps[currentBasemap]);
            }
            
            basemaps[basemap].addTo(map);
            currentBasemap = basemap;
            
            document.getElementById('basemapCard').classList.add('hidden');
        });
    });

    // Toolbar Controls
    document.getElementById('zoomIn').addEventListener('click', function() {
        map.zoomIn();
    });

    document.getElementById('zoomOut').addEventListener('click', function() {
        map.zoomOut();
    });

    // Chatbox Toggle
    document.getElementById('chatHeader').addEventListener('click', function() {
        const chatContent = document.getElementById('chatContent');
        const chatInputRow = document.querySelector('.chat-input-row');
        
        if (chatContent.style.display === 'none') {
            chatContent.style.display = 'flex';
            chatInputRow.style.display = 'flex';
            this.querySelector('span:last-child').textContent = '‚àí';
        } else {
            chatContent.style.display = 'none';
            chatInputRow.style.display = 'none';
            this.querySelector('span:last-child').textContent = '+';
        }
    });

    // Search Functionality
    document.getElementById('doSearch').addEventListener('click', function() {
        performSearch();
    });

    document.getElementById('searchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            performSearch();
        }
    });

    function performSearch() {
        const query = document.getElementById('searchInput').value.trim();
        
        if (!query) return;
        
        // Cek jika query adalah koordinat
        const coordMatch = query.match(/^(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)$/);
        
        if (coordMatch) {
            const lat = parseFloat(coordMatch[1]);
            const lng = parseFloat(coordMatch[2]);
            
            if (!isNaN(lat) && !isNaN(lng)) {
                map.setView([lat, lng], 16);
                L.marker([lat, lng]).addTo(map)
                    .bindPopup(`Lokasi: ${lat}, ${lng}`)
                    .openPopup();
                return;
            }
        }
        
        alert('Silakan gunakan format koordinat: latitude,longitude (contoh: -5.943,106.152)');
    }

    // ==================== SISTEM INTEGRASI GEOJSON ====================
    let geoJSONLayer = null;
    let densityChart = null;
    let currentFilter = 'all';

    // Fungsi untuk memuat dan menampilkan data GeoJSON
    function loadGeoJSONData() {
        // Hapus layer sebelumnya jika ada
        if (geoJSONLayer) {
            map.removeLayer(geoJSONLayer);
        }
        
        const data = eviPanjang21;
        
        // Hitung statistik
        calculateStatistics(data);
        
        // Style berdasarkan gridcode (kerapatan vegetasi)
        function getStyleByGridcode(feature) {
            const gridcode = feature.properties.gridcode;
            let color, opacity, weight;
            
            switch(gridcode) {
                case 1: // Sangat Rendah
                    color = '#ffffcc';
                    opacity = 0.7;
                    weight = 1;
                    break;
                case 2: // Rendah
                    color = '#c2e699';
                    opacity = 0.7;
                    weight = 1;
                    break;
                case 3: // Sedang-Rendah
                    color = '#78c679';
                    opacity = 0.7;
                    weight = 1.5;
                    break;
                case 4: // Sedang
                    color = '#31a354';
                    opacity = 0.8;
                    weight = 2;
                    break;
                case 5: // Tinggi
                    color = '#006837';
                    opacity = 0.9;
                    weight = 2.5;
                    break;
                case 6: // Sangat Tinggi
                    color = '#004529';
                    opacity = 1;
                    weight = 3;
                    break;
                default:
                    color = '#808080';
                    opacity = 0.5;
                    weight = 1;
            }
            
            return {
                fillColor: color,
                color: color,
                weight: weight,
                opacity: 0.8,
                fillOpacity: opacity
            };
        }
        
        // Filter function
        function filterByDensity(feature) {
            if (currentFilter === 'all') return true;
            return feature.properties.gridcode.toString() === currentFilter;
        }
        
        // Tambah layer GeoJSON ke peta
        geoJSONLayer = L.geoJSON(data, {
            style: getStyleByGridcode,
            filter: filterByDensity,
            onEachFeature: function(feature, layer) {
                const props = feature.properties;
                
                let popupContent = `
                    <div style="max-width: 280px;">
                        <h4 style="margin:0 0 8px 0; color: #0a5c36; border-bottom: 2px solid #0a5c36; padding-bottom: 4px;">
                            EVI Panjang21 - Poligon ${props.Id}
                        </h4>
                        <div style="font-size: 12px; color: #333; line-height: 1.4;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <strong>Kerapatan:</strong> 
                                <span style="color: ${getColorByGridcode(props.gridcode)}; font-weight: bold;">
                                    ${getKerapatanLabel(props.gridcode)}
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <strong>Gridcode:</strong> <span>${props.gridcode || 'N/A'}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <strong>Luasan:</strong> <span>${props.luasan ? props.luasan.toFixed(2) + ' ha' : 'N/A'}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <strong>Shape Length:</strong> <span>${props.Shape_Length ? props.Shape_Length.toFixed(2) + ' m' : 'N/A'}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                <strong>Shape Area:</strong> <span>${props.Shape_Area ? (props.Shape_Area / 10000).toFixed(2) + ' ha' : 'N/A'}</span>
                            </div>
                        </div>
                `;
                
                // Tambahkan info tambahan berdasarkan gridcode
                popupContent += `
                    <div style="margin-top: 8px; padding: 6px; background: #f8f9fa; border-radius: 4px; font-size: 11px; border-left: 3px solid ${getColorByGridcode(props.gridcode)};">
                        <strong>Indeks Vegetasi:</strong> ${getKerapatanLabel(props.gridcode)}<br>
                        <div style="width: 100%; height: 8px; background: linear-gradient(90deg, #ffffcc, #004529); margin: 4px 0; border-radius: 4px; position: relative;">
                            <div style="position: absolute; left: ${((props.gridcode - 1) / 5) * 100}%; width: 20%; height: 100%; background: ${getColorByGridcode(props.gridcode)}; border-radius: 4px;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 9px; color: #666;">
                            <span>Sangat Rendah</span>
                            <span>Sangat Tinggi</span>
                        </div>
                    </div>
                `;
                
                popupContent += `</div>`;
                layer.bindPopup(popupContent);
                
                // Tooltip
                layer.bindTooltip(`EVI Panjang21 - ${getKerapatanLabel(props.gridcode)} (${props.luasan} ha)`, {
                    permanent: false,
                    direction: 'auto',
                    className: 'custom-tooltip'
                });
            }
        }).addTo(map);
        
        // Fit bounds ke data
        map.fitBounds(geoJSONLayer.getBounds());
        
        console.log(`Data EVI Panjang21 berhasil dimuat - ${data.features.length} fitur`);
    }

    // Fungsi untuk mendapatkan label kerapatan
    function getKerapatanLabel(gridcode) {
        switch(gridcode) {
            case 1: return "Sangat Rendah";
            case 2: return "Rendah";
            case 3: return "Sedang-Rendah";
            case 4: return "Sedang";
            case 5: return "Tinggi";
            case 6: return "Sangat Tinggi";
            default: return "Tidak Diketahui";
        }
    }

    // Fungsi untuk menghitung statistik
    function calculateStatistics(data) {
        let totalLuasan = 0;
        let jumlahPoligon = data.features.length;
        let luasanMax = 0;
        let luasanMin = Infinity;
        let kerapatanRata = 0;
        
        const densityCount = {
            1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0
        };
        
        data.features.forEach(feature => {
            const luasan = feature.properties.luasan || 0;
            const gridcode = feature.properties.gridcode || 1;
            
            totalLuasan += luasan;
            densityCount[gridcode]++;
            
            if (luasan > luasanMax) luasanMax = luasan;
            if (luasan < luasanMin) luasanMin = luasan;
            kerapatanRata += gridcode;
        });
        
        kerapatanRata = (kerapatanRata / jumlahPoligon).toFixed(1);
        
        // Update statistik panel
        document.getElementById('totalLuas').textContent = totalLuasan.toFixed(2) + ' ha';
        document.getElementById('jumlahPoligon').textContent = jumlahPoligon;
        document.getElementById('kerapatanRata').textContent = kerapatanRata;
        document.getElementById('luasMax').textContent = luasanMax.toFixed(2) + ' ha';
        document.getElementById('luasMin').textContent = luasanMin.toFixed(2) + ' ha';
        
        // Update detail kerapatan
        document.getElementById('detailSangatRendah').textContent = densityCount[1] + ' poligon';
        document.getElementById('detailRendah').textContent = densityCount[2] + ' poligon';
        document.getElementById('detailSedangRendah').textContent = densityCount[3] + ' poligon';
        document.getElementById('detailSedang').textContent = densityCount[4] + ' poligon';
        document.getElementById('detailTinggi').textContent = densityCount[5] + ' poligon';
        document.getElementById('detailSangatTinggi').textContent = densityCount[6] + ' poligon';
        
        // Update data display
        document.getElementById('dataSangatRendah').textContent = densityCount[1] + ' poligon';
        document.getElementById('dataRendah').textContent = densityCount[2] + ' poligon';
        document.getElementById('dataSedangRendah').textContent = densityCount[3] + ' poligon';
        document.getElementById('dataSedang').textContent = densityCount[4] + ' poligon';
        document.getElementById('dataTinggi').textContent = densityCount[5] + ' poligon';
        document.getElementById('dataSangatTinggi').textContent = densityCount[6] + ' poligon';
        
        // Update chart
        updateDensityChart(densityCount);
    }

    // Fungsi untuk update chart kerapatan
    function updateDensityChart(densityCount) {
        const ctx = document.getElementById('densityChart').getContext('2d');
        
        if (densityChart) {
            densityChart.destroy();
        }
        
        densityChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Sangat Rendah', 'Rendah', 'Sedang-Rendah', 'Sedang', 'Tinggi', 'Sangat Tinggi'],
                datasets: [{
                    label: 'Distribusi Kerapatan',
                    data: [
                        densityCount[1],
                        densityCount[2],
                        densityCount[3],
                        densityCount[4],
                        densityCount[5],
                        densityCount[6]
                    ],
                    backgroundColor: [
                        '#ffffcc',
                        '#c2e699',
                        '#78c679',
                        '#31a354',
                        '#006837',
                        '#004529'
                    ],
                    borderColor: [
                        '#d9d9a3',
                        '#a8c97f',
                        '#5fa85a',
                        '#298845',
                        '#005426',
                        '#003318'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12,
                            font: {
                                size: 10
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Distribusi Kerapatan EVI',
                        font: {
                            size: 12
                        }
                    }
                }
            }
        });
    }

    // Fungsi untuk mendapatkan warna berdasarkan gridcode
    function getColorByGridcode(gridcode) {
        switch(gridcode) {
            case 1: return '#ffffcc';
            case 2: return '#c2e699';
            case 3: return '#78c679';
            case 4: return '#31a354';
            case 5: return '#006837';
            case 6: return '#004529';
            default: return '#808080';
        }
    }

    // Filter functionality
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Update current filter
            currentFilter = this.getAttribute('data-density');
            
            // Reload GeoJSON data with filter
            loadGeoJSONData();
        });
    });

    // Download Data GeoJSON
    document.getElementById('downloadData').addEventListener('click', function() {
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(eviPanjang21, null, 2));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", "evi_panjang21.geojson");
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
        
        alert('Data GeoJSON EVI Panjang21 berhasil diunduh!');
    });

    // Screenshot functionality
    document.getElementById('screenshot').addEventListener('click', function() {
        alert('Fitur screenshot akan segera tersedia!');
    });

    // Export Report
    document.getElementById('exportReport').addEventListener('click', function() {
        alert('Fitur export laporan PDF akan segera tersedia!');
    });

    // ==================== LEGENDA DINAMIS ====================
    function updateLegend() {
        const legend = L.control({ position: 'bottomright' });
        
        legend.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'info legend');
            div.style.background = 'white';
            div.style.padding = '10px';
            div.style.borderRadius = '5px';
            div.style.boxShadow = '0 0 10px rgba(0,0,0,0.2)';
            
            const grades = [1, 2, 3, 4, 5, 6];
            const labels = [
                'Sangat Rendah (1)',
                'Rendah (2)', 
                'Sedang-Rendah (3)',
                'Sedang (4)',
                'Tinggi (5)',
                'Sangat Tinggi (6)'
            ];
            const colors = [
                '#ffffcc', '#c2e699', '#78c679', '#31a354', '#006837', '#004529'
            ];
            
            let legendHTML = '<h4 style="margin:0 0 8px 0;">Kerapatan EVI Panjang21</h4>';
            
            for (let i = 0; i < grades.length; i++) {
                legendHTML += `
                    <div style="display: flex; align-items: center; margin: 4px 0;">
                        <div style="width: 20px; height: 15px; background: ${colors[i]}; margin-right: 8px; border: 1px solid #666;"></div>
                        <span style="font-size: 12px;">${labels[i]}</span>
                    </div>
                `;
            }
            
            div.innerHTML = legendHTML;
            return div;
        };
        
        legend.addTo(map);
    }

    // ==================== KELAS KERAPATAN ====================
    const CLASSES = [
      { id: 'very-high', label: 'Sangat Tinggi', color: '#004529' },
      { id: 'high', label: 'Tinggi', color: '#006837' },
      { id: 'medium', label: 'Sedang', color: '#31a354' },
      { id: 'low-medium', label: 'Sedang-Rendah', color: '#78c679' },
      { id: 'low', label: 'Rendah', color: '#c2e699' },
      { id: 'very-low', label: 'Sangat Rendah', color: '#ffffcc' }
    ];

    // Render Kelas
    function renderClasses() {
      const classesList = document.getElementById('classesList');
      classesList.innerHTML = '';
      
      CLASSES.forEach(cls => {
        const item = document.createElement('div');
        item.className = 'class-item';
        item.innerHTML = `
          <div class="class-color" style="background:${cls.color}"></div>
          <div class="class-label">${cls.label}</div>
          <div class="switch"><div class="knob"></div></div>
        `;
        classesList.appendChild(item);
        
        // Switch event
        const switchEl = item.querySelector('.switch');
        switchEl.addEventListener('click', function() {
          this.classList.toggle('on');
        });
        switchEl.classList.add('on');
      });
    }

    // ==================== INISIALISASI ====================
    document.addEventListener('DOMContentLoaded', function() {
        renderClasses();
        updateLegend();
        
        // Load data EVI Panjang21
        setTimeout(() => {
            loadGeoJSONData();
        }, 1000);
        
        // Scale update
        map.on('zoomend', function() {
            const zoom = map.getZoom();
            const scale = Math.round(591657550 / Math.pow(2, zoom - 1));
            document.getElementById('scaleBox').textContent = `Skala: 1:${scale.toLocaleString()}`;
        });
        map.fire('zoomend');
    });

  </script>

</body>

</html>
